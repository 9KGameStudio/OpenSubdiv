<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenSubdiv: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<strong syle="font-weight: bold; float: right">Pixar Animation Studios</strong>
<h1>OpenSubdiv</h1>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>opensubdiv/hbr/vertex.h</h1><a href="hbr_2vertex_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">//     Copyright (C) Pixar. All rights reserved.</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">//     This license governs use of the accompanying software. If you</span>
<a name="l00005"></a>00005 <span class="comment">//     use the software, you accept this license. If you do not accept</span>
<a name="l00006"></a>00006 <span class="comment">//     the license, do not use the software.</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">//     1. Definitions</span>
<a name="l00009"></a>00009 <span class="comment">//     The terms &quot;reproduce,&quot; &quot;reproduction,&quot; &quot;derivative works,&quot; and</span>
<a name="l00010"></a>00010 <span class="comment">//     &quot;distribution&quot; have the same meaning here as under U.S.</span>
<a name="l00011"></a>00011 <span class="comment">//     copyright law.  A &quot;contribution&quot; is the original software, or</span>
<a name="l00012"></a>00012 <span class="comment">//     any additions or changes to the software.</span>
<a name="l00013"></a>00013 <span class="comment">//     A &quot;contributor&quot; is any person or entity that distributes its</span>
<a name="l00014"></a>00014 <span class="comment">//     contribution under this license.</span>
<a name="l00015"></a>00015 <span class="comment">//     &quot;Licensed patents&quot; are a contributor&apos;s patent claims that read</span>
<a name="l00016"></a>00016 <span class="comment">//     directly on its contribution.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">//     2. Grant of Rights</span>
<a name="l00019"></a>00019 <span class="comment">//     (A) Copyright Grant- Subject to the terms of this license,</span>
<a name="l00020"></a>00020 <span class="comment">//     including the license conditions and limitations in section 3,</span>
<a name="l00021"></a>00021 <span class="comment">//     each contributor grants you a non-exclusive, worldwide,</span>
<a name="l00022"></a>00022 <span class="comment">//     royalty-free copyright license to reproduce its contribution,</span>
<a name="l00023"></a>00023 <span class="comment">//     prepare derivative works of its contribution, and distribute</span>
<a name="l00024"></a>00024 <span class="comment">//     its contribution or any derivative works that you create.</span>
<a name="l00025"></a>00025 <span class="comment">//     (B) Patent Grant- Subject to the terms of this license,</span>
<a name="l00026"></a>00026 <span class="comment">//     including the license conditions and limitations in section 3,</span>
<a name="l00027"></a>00027 <span class="comment">//     each contributor grants you a non-exclusive, worldwide,</span>
<a name="l00028"></a>00028 <span class="comment">//     royalty-free license under its licensed patents to make, have</span>
<a name="l00029"></a>00029 <span class="comment">//     made, use, sell, offer for sale, import, and/or otherwise</span>
<a name="l00030"></a>00030 <span class="comment">//     dispose of its contribution in the software or derivative works</span>
<a name="l00031"></a>00031 <span class="comment">//     of the contribution in the software.</span>
<a name="l00032"></a>00032 <span class="comment">//</span>
<a name="l00033"></a>00033 <span class="comment">//     3. Conditions and Limitations</span>
<a name="l00034"></a>00034 <span class="comment">//     (A) No Trademark License- This license does not grant you</span>
<a name="l00035"></a>00035 <span class="comment">//     rights to use any contributor&apos;s name, logo, or trademarks.</span>
<a name="l00036"></a>00036 <span class="comment">//     (B) If you bring a patent claim against any contributor over</span>
<a name="l00037"></a>00037 <span class="comment">//     patents that you claim are infringed by the software, your</span>
<a name="l00038"></a>00038 <span class="comment">//     patent license from such contributor to the software ends</span>
<a name="l00039"></a>00039 <span class="comment">//     automatically.</span>
<a name="l00040"></a>00040 <span class="comment">//     (C) If you distribute any portion of the software, you must</span>
<a name="l00041"></a>00041 <span class="comment">//     retain all copyright, patent, trademark, and attribution</span>
<a name="l00042"></a>00042 <span class="comment">//     notices that are present in the software.</span>
<a name="l00043"></a>00043 <span class="comment">//     (D) If you distribute any portion of the software in source</span>
<a name="l00044"></a>00044 <span class="comment">//     code form, you may do so only under this license by including a</span>
<a name="l00045"></a>00045 <span class="comment">//     complete copy of this license with your distribution. If you</span>
<a name="l00046"></a>00046 <span class="comment">//     distribute any portion of the software in compiled or object</span>
<a name="l00047"></a>00047 <span class="comment">//     code form, you may only do so under a license that complies</span>
<a name="l00048"></a>00048 <span class="comment">//     with this license.</span>
<a name="l00049"></a>00049 <span class="comment">//     (E) The software is licensed &quot;as-is.&quot; You bear the risk of</span>
<a name="l00050"></a>00050 <span class="comment">//     using it. The contributors give no express warranties,</span>
<a name="l00051"></a>00051 <span class="comment">//     guarantees or conditions. You may have additional consumer</span>
<a name="l00052"></a>00052 <span class="comment">//     rights under your local laws which this license cannot change.</span>
<a name="l00053"></a>00053 <span class="comment">//     To the extent permitted under your local laws, the contributors</span>
<a name="l00054"></a>00054 <span class="comment">//     exclude the implied warranties of merchantability, fitness for</span>
<a name="l00055"></a>00055 <span class="comment">//     a particular purpose and non-infringement.</span>
<a name="l00056"></a>00056 <span class="comment">//</span>
<a name="l00057"></a>00057 <span class="preprocessor">#ifndef HBRVERTEX_H</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#define HBRVERTEX_H</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &lt;iterator&gt;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;../hbr/fvarData.h&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;../hbr/face.h&quot;</span>
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;../version.h&quot;</span>
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="keyword">namespace </span>OpenSubdiv {
<a name="l00070"></a>00070 <span class="keyword">namespace </span><a class="code" href="version_8h.html#a3e1fd5f7ca528466eeb21b73b1b33a8c">OPENSUBDIV_VERSION</a> {
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>HbrHalfedge;
<a name="l00073"></a>00073 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>HbrHalfedgeCompare;
<a name="l00074"></a>00074 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>HbrVertex;
<a name="l00075"></a>00075 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>HbrVertexOperator;
<a name="l00076"></a>00076 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>HbrFaceOperator;
<a name="l00077"></a>00077 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>HbrHalfedgeOperator;
<a name="l00078"></a>00078 
<a name="l00079"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">00079</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex</a> {
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="keyword">public</span>:
<a name="l00082"></a>00082     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab1e8a4cea7e9f2c78770079772450987">HbrVertex</a>();
<a name="l00083"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac8264258426ddedb8a726d32ee5b08ee">00083</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac8264258426ddedb8a726d32ee5b08ee">HbrVertex</a>(<span class="keywordtype">int</span> vid, <span class="keyword">const</span> T &amp;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6528175077145063c9212d269feb96c8">data</a>, <span class="keywordtype">int</span> fvarwidth) {
<a name="l00084"></a>00084         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab7f23a8fb14728d1f1076e91f79b21c6">Initialize</a>(vid, data, fvarwidth);
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab7f23a8fb14728d1f1076e91f79b21c6">Initialize</a>(<span class="keywordtype">int</span> vid, <span class="keyword">const</span> T &amp;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6528175077145063c9212d269feb96c8">data</a>, <span class="keywordtype">int</span> fvarwidth);
<a name="l00087"></a>00087     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adec5c7fed065328f3411cc6cc258ca16">~HbrVertex</a>();
<a name="l00088"></a>00088     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4cb945eeb8114443dcbd2a122de00dc8">Destroy</a>();
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="comment">// Registers an incident edge with the vertex</span>
<a name="l00091"></a>00091     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab6f3530628df0496af5a2ead6adb74c6">AddIncidentEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     <span class="comment">// Unregister an incident edge with the vertex</span>
<a name="l00094"></a>00094     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a01d07b473a3979778b8c1a63f634047d">RemoveIncidentEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="comment">// Checks if removal of the indicated incident edge will result</span>
<a name="l00097"></a>00097     <span class="comment">// in a singular vertex</span>
<a name="l00098"></a>00098     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4597a9d2af2b679672c8274b52079b59">EdgeRemovalWillMakeSingular</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) <span class="keyword">const</span>;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <span class="comment">// Sets up vertex flags after the vertex has been bound to a mesh</span>
<a name="l00101"></a>00101     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a16ccb6dfc2785b1f0ed81e1633c5b45a">Finish</a>();
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <span class="comment">// Compute the valence of this vertex</span>
<a name="l00104"></a>00104     <span class="keywordtype">int</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a54f0f6d5387a24b5625a5f0d0e3dc380">GetValence</a>() <span class="keyword">const</span>;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="comment">// Compute the valence of this vertex including only edges which</span>
<a name="l00107"></a>00107     <span class="comment">// are &quot;coarse&quot; (highest level edges)</span>
<a name="l00108"></a>00108     <span class="keywordtype">int</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af2f9c476c3b23850561404c1b501d1ec">GetCoarseValence</a>() <span class="keyword">const</span>;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <span class="comment">// Return vertex ID</span>
<a name="l00111"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a800b91c2ad213a4fcf50c23764c69836">00111</a>     <span class="keywordtype">int</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a800b91c2ad213a4fcf50c23764c69836">GetID</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aef6fb61f954d9a82ba7e2d70ebb9f097">id</a>; }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     <span class="comment">// Return vertex data</span>
<a name="l00114"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34eab1b6dfc8e3d71a222bacc53ec95c">00114</a>     T&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34eab1b6dfc8e3d71a222bacc53ec95c">GetData</a>() { <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6528175077145063c9212d269feb96c8">data</a>; }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <span class="comment">// Return vertex data</span>
<a name="l00117"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a5171fb68d82ac28b79142dc53281373e">00117</a>     <span class="keyword">const</span> T&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a5171fb68d82ac28b79142dc53281373e">GetData</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6528175077145063c9212d269feb96c8">data</a>; }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="comment">// Returns the facevarying data which is matched to the face.</span>
<a name="l00120"></a>00120     <span class="comment">// This may either be the &quot;generic&quot; facevarying item (fvardata, so</span>
<a name="l00121"></a>00121     <span class="comment">// data.GetFace() == face) or one specifically registered to the</span>
<a name="l00122"></a>00122     <span class="comment">// face (in the middle of morefvardata, so data.GetFace() ==</span>
<a name="l00123"></a>00123     <span class="comment">// face). If we require storage for a facevarying data designed to</span>
<a name="l00124"></a>00124     <span class="comment">// store discontinuous values for this face, we must have called</span>
<a name="l00125"></a>00125     <span class="comment">// NewFVarData before GetFVarData will give it to us.</span>
<a name="l00126"></a>00126     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae2b9eeea373112055d7bc5cb4d150703">GetFVarData</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34561d473bfc658aa613181103d86d61">face</a>);
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="comment">// Returns new facevarying data matched to the face</span>
<a name="l00129"></a>00129     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3042b95b8aeea0a6606120667d9f4d89">NewFVarData</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34561d473bfc658aa613181103d86d61">face</a>);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     <span class="comment">// Return any incident face attached to the vertex</span>
<a name="l00132"></a>00132     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af5b5c989455fee3e7d0f773883d73f8d">GetFace</a>() <span class="keyword">const</span>;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="comment">// Return the mesh to which this vertex belongs</span>
<a name="l00135"></a>00135     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html">HbrMesh&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>() <span class="keyword">const</span>;
<a name="l00136"></a>00136 
<a name="l00137"></a>00137     <span class="comment">// Return an edge connected to dest</span>
<a name="l00138"></a>00138     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab41df701002e9db49952da0f393fcbd3">GetEdge</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* dest) <span class="keyword">const</span>;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="comment">// Given an edge, returns the next edge in counterclockwise order</span>
<a name="l00141"></a>00141     <span class="comment">// around this vertex. Note well: this is only the next halfedge,</span>
<a name="l00142"></a>00142     <span class="comment">// which means that all edges returned by this function are</span>
<a name="l00143"></a>00143     <span class="comment">// guaranteed to have the same origin vertex (ie this vertex).  In</span>
<a name="l00144"></a>00144     <span class="comment">// boundary cases if you are interested in all edges you will not</span>
<a name="l00145"></a>00145     <span class="comment">// get the last edge with this function. For that reason,</span>
<a name="l00146"></a>00146     <span class="comment">// GetSurroundingEdges is preferred.</span>
<a name="l00147"></a>00147     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) <span class="keyword">const</span>;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="comment">// Given an edge, returns the previous edge (ie going clockwise)</span>
<a name="l00150"></a>00150     <span class="comment">// around this vertex</span>
<a name="l00151"></a>00151     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a5c37c8a85206b22b89997a181f41ca2d">GetPreviousEdge</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) <span class="keyword">const</span>;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153     <span class="comment">// Quadedge-like algebra subset. Since we are dealing with</span>
<a name="l00154"></a>00154     <span class="comment">// halfedges and not symmetric edges, these functions accept a</span>
<a name="l00155"></a>00155     <span class="comment">// destination vertex which indicates the (possibly imaginary)</span>
<a name="l00156"></a>00156     <span class="comment">// halfedge we are considering, and return the destination vertex</span>
<a name="l00157"></a>00157     <span class="comment">// of the desired (also possibly imaginary) halfedge. Also,</span>
<a name="l00158"></a>00158     <span class="comment">// currently they are potentially very inefficient and should be</span>
<a name="l00159"></a>00159     <span class="comment">// avoided.</span>
<a name="l00160"></a>00160     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbf455b61a13417ea15c9069e3e52bdb">GetQEONext</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* dest) <span class="keyword">const</span>;
<a name="l00161"></a>00161     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbf455b61a13417ea15c9069e3e52bdb">GetQEONext</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) <span class="keyword">const</span>;
<a name="l00162"></a>00162     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a445dab40035ec18361e650af3d1828a6">GetQEOPrev</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) <span class="keyword">const</span>;
<a name="l00163"></a>00163     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a445dab40035ec18361e650af3d1828a6">GetQEOPrev</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* dest) <span class="keyword">const</span>;
<a name="l00164"></a>00164     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab27e6c7ecdf9d3e6efd867a7219e616a">GetQELNext</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* dest) <span class="keyword">const</span>;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="comment">// Returns true if the vertex is on a boundary edge</span>
<a name="l00167"></a>00167     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa2d69e52a8f6798acfca7da322c01a71">OnBoundary</a>() <span class="keyword">const</span>;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="comment">// Returns true if the vertex has a facevarying mask which is</span>
<a name="l00170"></a>00170     <span class="comment">// smooth (0).</span>
<a name="l00171"></a>00171     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbe113d4c22b4cde5a62dd01ef561b2b">IsFVarSmooth</a>(<span class="keywordtype">int</span> datum);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     <span class="comment">// Returns true if all facevarying data has facevarying mask which</span>
<a name="l00174"></a>00174     <span class="comment">// is smooth</span>
<a name="l00175"></a>00175     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa8dbbb51ebb5add08dde898044d0653c">IsFVarAllSmooth</a>();
<a name="l00176"></a>00176 
<a name="l00177"></a>00177     <span class="comment">// Returns true if the vertex has a facevarying mask which is dart</span>
<a name="l00178"></a>00178     <span class="comment">// (1).</span>
<a name="l00179"></a>00179     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a086419dea7ebdb81180d9514be8cbac3">IsFVarDart</a>(<span class="keywordtype">int</span> datum);
<a name="l00180"></a>00180 
<a name="l00181"></a>00181     <span class="comment">// Returns true if the vertex is a facevarying corner for any</span>
<a name="l00182"></a>00182     <span class="comment">// incident face, where &quot;cornerness&quot; is defined as having two</span>
<a name="l00183"></a>00183     <span class="comment">// incident edges that make up a face both being facevarying</span>
<a name="l00184"></a>00184     <span class="comment">// edges.</span>
<a name="l00185"></a>00185     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a67a79bb79afc445650b21f55b702da59">IsFVarCorner</a>(<span class="keywordtype">int</span> datum);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <span class="comment">// Returns the sharpness of the vertex</span>
<a name="l00188"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a456cc893d5c51d093d4cab907f68f175">00188</a>     <span class="keywordtype">float</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a456cc893d5c51d093d4cab907f68f175">GetSharpness</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a>; }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <span class="comment">// Sets the sharpness of the vertex</span>
<a name="l00191"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa4fc769836ffaa02026865300956bc29">00191</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa4fc769836ffaa02026865300956bc29">SetSharpness</a>(<span class="keywordtype">float</span> sharp) { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a> = sharp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a716b53f702f719c9228b2b3d5f3a1ee6">ClearMask</a>(); }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193     <span class="comment">// Returns whether the corner is sharp at the current level of</span>
<a name="l00194"></a>00194     <span class="comment">// subdivision (next = false) or at the next level of subdivision</span>
<a name="l00195"></a>00195     <span class="comment">// (next = true).</span>
<a name="l00196"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a188dfbc19292c70d10a3319ea41db1ba">00196</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a188dfbc19292c70d10a3319ea41db1ba">IsSharp</a>(<span class="keywordtype">bool</span> next)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (next ? (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a> &gt; 0.0f) : (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a> &gt;= 1.0f)); }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198     <span class="comment">// Sets the vertex mask if the vertex is sharp to reflect that</span>
<a name="l00199"></a>00199     <span class="comment">// it&apos;s a corner</span>
<a name="l00200"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a716b53f702f719c9228b2b3d5f3a1ee6">00200</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a716b53f702f719c9228b2b3d5f3a1ee6">ClearMask</a>() {
<a name="l00201"></a>00201         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a> = 0; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa63eb30680028485265323f75f77841e">validmask</a> = 0; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7f13096ee23b5d0286e54dccd13a1b9">volatil</a> = 0;
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="comment">// Returns the integer mask of the vertex at the current level of</span>
<a name="l00205"></a>00205     <span class="comment">// subdivision (next = false) or at the next level of subdivision</span>
<a name="l00206"></a>00206     <span class="comment">// (next = true)</span>
<a name="l00207"></a>00207     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a30fd0c2809ce4dd00f5cc7756c5cb4c6">GetMask</a>(<span class="keywordtype">bool</span> next);
<a name="l00208"></a>00208 
<a name="l00209"></a>00209     <span class="comment">// Returns the facevarying integer mask of the vertex</span>
<a name="l00210"></a>00210     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2fb5200431d9b8d7ffc111a89fb8fe7d">GetFVarMask</a>(<span class="keywordtype">int</span> datum);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212     <span class="comment">// Computes the &quot;fractional mask&quot; of the vertex at the current</span>
<a name="l00213"></a>00213     <span class="comment">// subdivision level, based on the fractional sharpnesses of any</span>
<a name="l00214"></a>00214     <span class="comment">// adjacent sharp edges. The fractional mask is a value between 0</span>
<a name="l00215"></a>00215     <span class="comment">// and 1</span>
<a name="l00216"></a>00216     <span class="keywordtype">float</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab034ef6c49fcc1ce6233ff3d49c5e1ce">GetFractionalMask</a>() <span class="keyword">const</span>;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     <span class="comment">// Returns whether the vertex is singular (has two separate</span>
<a name="l00219"></a>00219     <span class="comment">// incident halfedge cycles)</span>
<a name="l00220"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a88e1c9ed85eb70295e9ec1d1ec3eec41">00220</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a88e1c9ed85eb70295e9ec1d1ec3eec41">IsSingular</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> &gt; 1; }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222     <span class="comment">// Collect the ring of edges around this vertex. Note well: not</span>
<a name="l00223"></a>00223     <span class="comment">// all edges in this list will have an orientation where the</span>
<a name="l00224"></a>00224     <span class="comment">// origin of the edge is this vertex!  This function requires an</span>
<a name="l00225"></a>00225     <span class="comment">// output iterator; to get the edges into a std::vector, use</span>
<a name="l00226"></a>00226     <span class="comment">// GetSurroundingEdges(std::back_inserter(myvector))</span>
<a name="l00227"></a>00227     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> OutputIterator&gt;
<a name="l00228"></a>00228     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a60bea0d909f265ef04b3f1a0a9929470">GetSurroundingEdges</a>(OutputIterator edges) <span class="keyword">const</span>;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <span class="comment">// Apply an edge operator to each edge in the ring of edges</span>
<a name="l00231"></a>00231     <span class="comment">// around this vertex</span>
<a name="l00232"></a>00232     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab31a1bf2f255b8296faebdf8cfc68d45">ApplyOperatorSurroundingEdges</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedgeOperator.html">HbrHalfedgeOperator&lt;T&gt;</a> &amp;op) <span class="keyword">const</span>;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="comment">// Collect the ring of vertices around this vertex (the ones that</span>
<a name="l00235"></a>00235     <span class="comment">// share an edge with this vertex). This function requires an</span>
<a name="l00236"></a>00236     <span class="comment">// output iterator; to get the vertices into a std::vector, use</span>
<a name="l00237"></a>00237     <span class="comment">// GetSurroundingVertices(std::back_inserter(myvector))</span>
<a name="l00238"></a>00238     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> OutputIterator&gt;
<a name="l00239"></a>00239     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa721dc69e0c5881b58085cec5d67543d">GetSurroundingVertices</a>(OutputIterator vertices) <span class="keyword">const</span>;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="comment">// Apply a vertex operator to each vertex in the ring of vertices</span>
<a name="l00242"></a>00242     <span class="comment">// around this vertex</span>
<a name="l00243"></a>00243     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a034e5809d6cd33bfff9a2adcc7c2082d">ApplyOperatorSurroundingVertices</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertexOperator.html">HbrVertexOperator&lt;T&gt;</a> &amp;op) <span class="keyword">const</span>;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245     <span class="comment">// Applys an operator to the ring of faces around this vertex</span>
<a name="l00246"></a>00246     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2cbcd944525fdf2b745d05eec23ab3f2">ApplyOperatorSurroundingFaces</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFaceOperator.html">HbrFaceOperator&lt;T&gt;</a> &amp;op) <span class="keyword">const</span>;
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="comment">// Returns the parent, which can be a edge, face, or vertex</span>
<a name="l00249"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a860ae737217de3d2861e3d559752ed25">00249</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a860ae737217de3d2861e3d559752ed25">GetParentEdge</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> == <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88afabdd929f7d7e02e6f1518c42676f0f2">k_ParentEdge</a> ? <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.edge : 0); }
<a name="l00250"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2fe70c643b66b4351db1ff5047f2c483">00250</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2fe70c643b66b4351db1ff5047f2c483">GetParentFace</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> == <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88ab1a0eda41f30bb77176bfe43d6cddbe0">k_ParentFace</a> ? <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.face : 0); }
<a name="l00251"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab2adb288a9a6188e1a11be45e833c4bd">00251</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab2adb288a9a6188e1a11be45e833c4bd">GetParentVertex</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> == <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88a89fce11a585f7a1c4852b055f4e6f535">k_ParentVertex</a> ? <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex : 0); }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     <span class="comment">// Set the parent pointer</span>
<a name="l00254"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#afdb73f0e2d117a2c57fff64e000c22cd">00254</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#afdb73f0e2d117a2c57fff64e000c22cd">SetParent</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) { assert(!edge || !<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex); <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88afabdd929f7d7e02e6f1518c42676f0f2">k_ParentEdge</a>; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.edge = edge; }
<a name="l00255"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a19e914bd5f600a1ed986547bd47087a3">00255</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a19e914bd5f600a1ed986547bd47087a3">SetParent</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34561d473bfc658aa613181103d86d61">face</a>) { assert(!face || !<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex); <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88ab1a0eda41f30bb77176bfe43d6cddbe0">k_ParentFace</a>; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.face = face; }
<a name="l00256"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#afb0b906cac9e0c60feb3e979021ce8cb">00256</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#afb0b906cac9e0c60feb3e979021ce8cb">SetParent</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4fb898e3f0d348520c9dc66f9489d581">vertex</a>) { assert(!vertex || !<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex); <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88a89fce11a585f7a1c4852b055f4e6f535">k_ParentVertex</a>; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex = vertex; }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <span class="comment">// Subdivides the vertex and returns the child vertex</span>
<a name="l00259"></a>00259     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a36aef7461781226e1bcb3cecd535b7b7">Subdivide</a>();
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <span class="comment">// Refines the ring of faces around this vertex</span>
<a name="l00262"></a>00262     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#acd6bb9ac89bac06b124d53008205be25">Refine</a>();
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     <span class="comment">// Make sure the vertex has all faces in the ring around it</span>
<a name="l00265"></a>00265     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3eb19d571d6b403d62770f19781016c1">GuaranteeNeighbors</a>();
<a name="l00266"></a>00266 
<a name="l00267"></a>00267     <span class="comment">// Indicates that the vertex may have a missing face neighbor and</span>
<a name="l00268"></a>00268     <span class="comment">// may need to guarantee its neighbors in the future</span>
<a name="l00269"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a264079917ba6b7c88cacf7ae21ad19a2">00269</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a264079917ba6b7c88cacf7ae21ad19a2">UnGuaranteeNeighbors</a>() {
<a name="l00270"></a>00270         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3833bba2af7f57c869e90f03ab9fc7a5">neighborsguaranteed</a> = 0;
<a name="l00271"></a>00271         <span class="comment">// Its mask is also invalidated</span>
<a name="l00272"></a>00272         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa63eb30680028485265323f75f77841e">validmask</a> = 0;
<a name="l00273"></a>00273     }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="comment">// Remove the reference to subdivided vertex</span>
<a name="l00276"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a12388c053a3ec905473c085bf3a32210">00276</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a12388c053a3ec905473c085bf3a32210">RemoveChild</a>() { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a> = 0; }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278     <span class="comment">// Returns true if the vertex still has an incident edge (in other</span>
<a name="l00279"></a>00279     <span class="comment">// words, it belongs to a face)</span>
<a name="l00280"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9948bb29db5dc899f127c08616d61fa5">00280</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9948bb29db5dc899f127c08616d61fa5">IsReferenced</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a> != 0; }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <span class="comment">// Returns true if the vertex is extraordinary</span>
<a name="l00283"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9d48738a4225f996d11a3c00ccf2644a">00283</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9d48738a4225f996d11a3c00ccf2644a">IsExtraordinary</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a87498a9a21ea33ac0fd9961226b76c14">extraordinary</a>; }
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     <span class="comment">// Tag the vertex as being extraordinary</span>
<a name="l00286"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2344fc7356a22e8e855e5d1d210bd750">00286</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2344fc7356a22e8e855e5d1d210bd750">SetExtraordinary</a>() { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a87498a9a21ea33ac0fd9961226b76c14">extraordinary</a> = 1; }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288     <span class="comment">// Returns whether the vertex is volatile (incident to a semisharp</span>
<a name="l00289"></a>00289     <span class="comment">// edge or semisharp corner)</span>
<a name="l00290"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac9584321ac723f85c17193297ecef7a7">00290</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac9584321ac723f85c17193297ecef7a7">IsVolatile</a>() { <span class="keywordflow">if</span> (!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa63eb30680028485265323f75f77841e">validmask</a>) <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a30fd0c2809ce4dd00f5cc7756c5cb4c6">GetMask</a>(<span class="keyword">false</span>); <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7f13096ee23b5d0286e54dccd13a1b9">volatil</a>; }
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="comment">// Simple bookkeeping needed for garbage collection by HbrMesh</span>
<a name="l00293"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad66ca515eecb2d05a81db643b5b0e92e">00293</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad66ca515eecb2d05a81db643b5b0e92e">IsCollected</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af697338ebd33e9748d53eb3657c7312e">collected</a>; }
<a name="l00294"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#afcf3ce807880fd820ce271954c35c60b">00294</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#afcf3ce807880fd820ce271954c35c60b">SetCollected</a>() { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af697338ebd33e9748d53eb3657c7312e">collected</a> = 1; }
<a name="l00295"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9926c6bb2a1e8b7df2910ff64764d9ac">00295</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9926c6bb2a1e8b7df2910ff64764d9ac">ClearCollected</a>() { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af697338ebd33e9748d53eb3657c7312e">collected</a> = 0; }
<a name="l00296"></a>00296 
<a name="l00297"></a>00297     <span class="comment">// Bookkeeping to see if a vertex edit exists for this vertex</span>
<a name="l00298"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a673330a21f8aecd837ed60afe64ecc0b">00298</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a673330a21f8aecd837ed60afe64ecc0b">HasVertexEdit</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac3ac17e15596b739efd3263caa7e0768">hasvertexedit</a>; }
<a name="l00299"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adb6924f97452192b47da50563de57c0e">00299</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adb6924f97452192b47da50563de57c0e">SetVertexEdit</a>() { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac3ac17e15596b739efd3263caa7e0768">hasvertexedit</a> = 1; }
<a name="l00300"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7c83f4d76a5850b264de530a89a6b876">00300</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7c83f4d76a5850b264de530a89a6b876">ClearVertexEdit</a>() { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac3ac17e15596b739efd3263caa7e0768">hasvertexedit</a> = 0; }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302     <span class="comment">// Returns memory statistics</span>
<a name="l00303"></a>00303     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a821e50af61075a431beec8d28832a3ad">GetMemStats</a>() <span class="keyword">const</span>;
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <span class="comment">// Returns true if the vertex is connected. This means that it has</span>
<a name="l00306"></a>00306     <span class="comment">// an incident edge</span>
<a name="l00307"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a61554ca9699cef43227d5e36f824a25a">00307</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a61554ca9699cef43227d5e36f824a25a">IsConnected</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> &gt; 0; }
<a name="l00308"></a>00308 
<a name="l00309"></a>00309     <span class="comment">// Return an incident edge to this vertex, which happens to be the</span>
<a name="l00310"></a>00310     <span class="comment">// first halfedge of the cycles.</span>
<a name="l00311"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">00311</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> ? <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0] : 0; }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     <span class="comment">// Sharpness and mask constants</span>
<a name="l00314"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476">00314</a>     <span class="keyword">enum</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476">Mask</a> {
<a name="l00315"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a66cb531929fea8b8e6ccb92d3c9e86d4">00315</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a66cb531929fea8b8e6ccb92d3c9e86d4">k_Smooth</a> = 0,
<a name="l00316"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a78c97cd177fd12a7570eb1991fb63bea">00316</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a78c97cd177fd12a7570eb1991fb63bea">k_Dart</a> = 1,
<a name="l00317"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a9599207e57a0b0be414872408ac012f1">00317</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a9599207e57a0b0be414872408ac012f1">k_Crease</a> = 2,
<a name="l00318"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">00318</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a> = 3,
<a name="l00319"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a935a286625c89155b671ed2cf90a165c">00319</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a935a286625c89155b671ed2cf90a165c">k_InfinitelySharp</a> = 10
<a name="l00320"></a>00320     };
<a name="l00321"></a>00321 
<a name="l00322"></a>00322     <span class="comment">// Increment the usage counter on the vertex</span>
<a name="l00323"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aafe2c223bd7c6b370eca367fa9fb204e">00323</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aafe2c223bd7c6b370eca367fa9fb204e">IncrementUsage</a>() { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4a9f796763282a46e5539e591ba56588">used</a>++; }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="comment">// Decrement the usage counter on the vertex</span>
<a name="l00326"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a61c5e7eb3364913d21c764f79150186f">00326</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a61c5e7eb3364913d21c764f79150186f">DecrementUsage</a>() { <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4a9f796763282a46e5539e591ba56588">used</a>--; }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     <span class="comment">// Check the usage counter on the vertex</span>
<a name="l00329"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a089ba5cef72cb2ba9b84801c8d2512e2">00329</a>     <span class="keywordtype">bool</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a089ba5cef72cb2ba9b84801c8d2512e2">IsUsed</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4a9f796763282a46e5539e591ba56588">used</a> || <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>; }
<a name="l00330"></a>00330 
<a name="l00331"></a>00331     <span class="comment">// Used by block allocator</span>
<a name="l00332"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7975986f19a3814035bc4d72ea94274">00332</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>*&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7975986f19a3814035bc4d72ea94274">GetNext</a>() { <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>; }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334     <span class="comment">// Returns the blind pointer to client data</span>
<a name="l00335"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a727d3a7861c91498b60daa754937f52f">00335</a>     <span class="keywordtype">void</span> *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a727d3a7861c91498b60daa754937f52f">GetClientData</a>()<span class="keyword"> const </span>{
<a name="l00336"></a>00336         <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bdf5634971d1e85b97b0bd7e1400b7d">clientData</a>;
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338 
<a name="l00339"></a>00339     <span class="comment">// Sets the blind pointer to client data</span>
<a name="l00340"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a62c4f3ee039085e3bd2b7bc2b92b2bd9">00340</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a62c4f3ee039085e3bd2b7bc2b92b2bd9">SetClientData</a>(<span class="keywordtype">void</span> *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6528175077145063c9212d269feb96c8">data</a>) {
<a name="l00341"></a>00341         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bdf5634971d1e85b97b0bd7e1400b7d">clientData</a> = data;
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 
<a name="l00344"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88">00344</a>     <span class="keyword">enum</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88">ParentType</a> {
<a name="l00345"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88a89fce11a585f7a1c4852b055f4e6f535">00345</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88a2a99890ff743451c66aa6e5acd888efe">k_ParentNone</a>, <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88ab1a0eda41f30bb77176bfe43d6cddbe0">k_ParentFace</a>, <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88afabdd929f7d7e02e6f1518c42676f0f2">k_ParentEdge</a>, <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88a89fce11a585f7a1c4852b055f4e6f535">k_ParentVertex</a>
<a name="l00346"></a>00346     };
<a name="l00347"></a>00347 
<a name="l00348"></a>00348 <span class="keyword">private</span>:
<a name="l00349"></a>00349     <span class="comment">// Splits a singular vertex into multiple nonsingular vertices</span>
<a name="l00350"></a>00350     <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a52d8a32b2cd8212d7eee9531ccbd1562">splitSingular</a>();
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="comment">// Data</span>
<a name="l00353"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6528175077145063c9212d269feb96c8">00353</a>     T <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6528175077145063c9212d269feb96c8">data</a>;
<a name="l00354"></a>00354 
<a name="l00355"></a>00355     <span class="comment">// Pointer to extra facevarying data. Space for this is allocated</span>
<a name="l00356"></a>00356     <span class="comment">// by NewFVarData</span>
<a name="l00357"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">00357</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a> *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a>;
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <span class="comment">// Unique ID of this vertex</span>
<a name="l00360"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aef6fb61f954d9a82ba7e2d70ebb9f097">00360</a>     <span class="keywordtype">int</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aef6fb61f954d9a82ba7e2d70ebb9f097">id</a>;
<a name="l00361"></a>00361 
<a name="l00362"></a>00362     <span class="comment">// Size of incident array</span>
<a name="l00363"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">00363</a>     <span class="keywordtype">int</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a>;
<a name="l00364"></a>00364 
<a name="l00365"></a>00365     <span class="comment">// The number of halfedges which have this vertex as the incident</span>
<a name="l00366"></a>00366     <span class="comment">// edge. When references == 0, the vertex is safe to delete</span>
<a name="l00367"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">00367</a>     <span class="keywordtype">int</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a>;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <span class="comment">// The number of faces marked &quot;used&quot; which share this vertex.  May</span>
<a name="l00370"></a>00370     <span class="comment">// not be the same as references!</span>
<a name="l00371"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4a9f796763282a46e5539e591ba56588">00371</a>     <span class="keywordtype">int</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4a9f796763282a46e5539e591ba56588">used</a>;
<a name="l00372"></a>00372 
<a name="l00373"></a>00373     <span class="comment">// Number of facevarying data allocated to this vertex in</span>
<a name="l00374"></a>00374     <span class="comment">// morefvardata</span>
<a name="l00375"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">00375</a>     <span class="keywordtype">int</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a>;
<a name="l00376"></a>00376 
<a name="l00377"></a>00377     <span class="comment">// Sharpness</span>
<a name="l00378"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">00378</a>     <span class="keywordtype">float</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a>;
<a name="l00379"></a>00379 
<a name="l00380"></a>00380     <span class="comment">// Vertex masks, at this level of subdivision and at the next</span>
<a name="l00381"></a>00381     <span class="comment">// level of subdivision. Valid only when validmask = 1.</span>
<a name="l00382"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">00382</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a>:3;
<a name="l00383"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">00383</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a>:3;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     <span class="comment">// Extraordinary bit</span>
<a name="l00386"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a87498a9a21ea33ac0fd9961226b76c14">00386</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a87498a9a21ea33ac0fd9961226b76c14">extraordinary</a>:1;
<a name="l00387"></a>00387     <span class="comment">// Whether the current mask value is correct or should be recalculated</span>
<a name="l00388"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa63eb30680028485265323f75f77841e">00388</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa63eb30680028485265323f75f77841e">validmask</a>:1;
<a name="l00389"></a>00389     <span class="comment">// Whether the vertex is &quot;volatile&quot; (is incident to a semisharp edge,</span>
<a name="l00390"></a>00390     <span class="comment">// or is a semisharp corner)</span>
<a name="l00391"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7f13096ee23b5d0286e54dccd13a1b9">00391</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7f13096ee23b5d0286e54dccd13a1b9">volatil</a>:1;
<a name="l00392"></a>00392     <span class="comment">// Whether we can guarantee the existence of neighboring faces on</span>
<a name="l00393"></a>00393     <span class="comment">// this vertex</span>
<a name="l00394"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3833bba2af7f57c869e90f03ab9fc7a5">00394</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3833bba2af7f57c869e90f03ab9fc7a5">neighborsguaranteed</a>:1;
<a name="l00395"></a>00395     <span class="comment">// Bookkeeping for HbrMesh</span>
<a name="l00396"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af697338ebd33e9748d53eb3657c7312e">00396</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af697338ebd33e9748d53eb3657c7312e">collected</a>:1;
<a name="l00397"></a>00397 
<a name="l00398"></a>00398     <span class="comment">// Whether the vertex has an edit. The edit is owned by a face</span>
<a name="l00399"></a>00399     <span class="comment">// so this is just a tag that indicates we need to search the</span>
<a name="l00400"></a>00400     <span class="comment">// vertex&apos;s neighboring faces for an edit</span>
<a name="l00401"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac3ac17e15596b739efd3263caa7e0768">00401</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac3ac17e15596b739efd3263caa7e0768">hasvertexedit</a>:1;
<a name="l00402"></a>00402     <span class="comment">// Whether the vertex edit (if any) has been applied</span>
<a name="l00403"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a920650ea1b49d2f125fbf8a490e49d62">00403</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a920650ea1b49d2f125fbf8a490e49d62">editsapplied</a>:1;
<a name="l00404"></a>00404     <span class="comment">// Whether Destroy() has been called</span>
<a name="l00405"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a122776ec047869d79832f8a8a80ece30">00405</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a122776ec047869d79832f8a8a80ece30">destroyed</a>:1;
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <span class="comment">// Parent type - can be face, edge, or vertex</span>
<a name="l00408"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">00408</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a>:2;
<a name="l00409"></a>00409 
<a name="l00410"></a>00410     <span class="comment">// List of edge cycles. For &quot;singular&quot; vertices, the corresponding</span>
<a name="l00411"></a>00411     <span class="comment">// set of adjacent halfedges may consist of several cycles, and we</span>
<a name="l00412"></a>00412     <span class="comment">// need to account for all of them here. In cases where</span>
<a name="l00413"></a>00413     <span class="comment">// nIncidentEdges is 1 or less (i.e. the general nonsingular</span>
<a name="l00414"></a>00414     <span class="comment">// case), this memory actually points at memory allocated after</span>
<a name="l00415"></a>00415     <span class="comment">// the end of this object. Otherwise, it&apos;s an actual separately</span>
<a name="l00416"></a>00416     <span class="comment">// allocated array.</span>
<a name="l00417"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">00417</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>** <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l00418"></a>00418 
<a name="l00419"></a>00419     <span class="comment">// Child vertex</span>
<a name="l00420"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">00420</a>     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>;
<a name="l00421"></a>00421 
<a name="l00422"></a>00422     <span class="keyword">union </span>{
<a name="l00423"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34561d473bfc658aa613181103d86d61">00423</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34561d473bfc658aa613181103d86d61">face</a>;
<a name="l00424"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">00424</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>;
<a name="l00425"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4fb898e3f0d348520c9dc66f9489d581">00425</a>         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4fb898e3f0d348520c9dc66f9489d581">vertex</a>;
<a name="l00426"></a>00426     } <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>;
<a name="l00427"></a>00427 
<a name="l00428"></a>00428     <span class="comment">// Blind client data pointer</span>
<a name="l00429"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bdf5634971d1e85b97b0bd7e1400b7d">00429</a>     <span class="keywordtype">void</span> * <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bdf5634971d1e85b97b0bd7e1400b7d">clientData</a>;
<a name="l00430"></a>00430 };
<a name="l00431"></a>00431 
<a name="l00432"></a>00432 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00433"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab1e8a4cea7e9f2c78770079772450987">00433</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab1e8a4cea7e9f2c78770079772450987">HbrVertex&lt;T&gt;::HbrVertex</a>() :
<a name="l00434"></a>00434     morefvardata(0), id(-1), nIncidentEdges(0), references(0), used(0), nfvardata(0), sharpness(0.0f), extraordinary(0), validmask(0), volatil(0), neighborsguaranteed(0), collected(0), hasvertexedit(0), editsapplied(0), destroyed(0), parentType(k_ParentNone), incidentEdges(0), vchild(0), clientData(0) {
<a name="l00435"></a>00435     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a716b53f702f719c9228b2b3d5f3a1ee6">ClearMask</a>();
<a name="l00436"></a>00436     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex = 0;
<a name="l00437"></a>00437 }
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00440"></a>00440 <span class="keywordtype">void</span>
<a name="l00441"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab7f23a8fb14728d1f1076e91f79b21c6">00441</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab7f23a8fb14728d1f1076e91f79b21c6">HbrVertex&lt;T&gt;::Initialize</a>(<span class="keywordtype">int</span> vid, <span class="keyword">const</span> T &amp;vdata, <span class="keywordtype">int</span> fvarwidth) {
<a name="l00442"></a>00442     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6528175077145063c9212d269feb96c8">data</a> = vdata;
<a name="l00443"></a>00443     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a> = 0 ;
<a name="l00444"></a>00444     <span class="keywordtype">id</span> = vid;
<a name="l00445"></a>00445     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a> = 0;
<a name="l00446"></a>00446     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4a9f796763282a46e5539e591ba56588">used</a> = 0;
<a name="l00447"></a>00447     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a87498a9a21ea33ac0fd9961226b76c14">extraordinary</a> = 0;
<a name="l00448"></a>00448     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a716b53f702f719c9228b2b3d5f3a1ee6">ClearMask</a>();
<a name="l00449"></a>00449     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3833bba2af7f57c869e90f03ab9fc7a5">neighborsguaranteed</a> = 0;
<a name="l00450"></a>00450     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af697338ebd33e9748d53eb3657c7312e">collected</a> = 0;
<a name="l00451"></a>00451     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac3ac17e15596b739efd3263caa7e0768">hasvertexedit</a> = 0;
<a name="l00452"></a>00452     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a920650ea1b49d2f125fbf8a490e49d62">editsapplied</a> = 0;
<a name="l00453"></a>00453     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a122776ec047869d79832f8a8a80ece30">destroyed</a> = 0;
<a name="l00454"></a>00454     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a> = 0.0f;
<a name="l00455"></a>00455     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> = 0;
<a name="l00456"></a>00456     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a> = 0;
<a name="l00457"></a>00457     assert(!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex);
<a name="l00458"></a>00458     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88a89fce11a585f7a1c4852b055f4e6f535">k_ParentVertex</a>;
<a name="l00459"></a>00459     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex = 0;
<a name="l00460"></a>00460     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bdf5634971d1e85b97b0bd7e1400b7d">clientData</a> = 0;
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     <span class="comment">// Upstream allocator ensured the class was padded by an extra</span>
<a name="l00463"></a>00463     <span class="comment">// amount for this</span>
<a name="l00464"></a>00464     <span class="keywordtype">char</span> *buffer = ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*<span class="keyword">this</span>));
<a name="l00465"></a>00465     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) buffer;
<a name="l00466"></a>00466     buffer += <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*);
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     <span class="keywordflow">if</span> (fvarwidth) {
<a name="l00469"></a>00469         <span class="comment">// Upstream allocator ensured the class was padded by the</span>
<a name="l00470"></a>00470         <span class="comment">// appropriate size. GetFVarData will return a pointer to this</span>
<a name="l00471"></a>00471         <span class="comment">// memory, but it needs to be properly initialized.</span>
<a name="l00472"></a>00472         <span class="comment">// Run placement new to initialize datum</span>
<a name="l00473"></a>00473         <span class="keyword">new</span> (buffer) <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>((<span class="keywordtype">float</span>*) (buffer + <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>)));
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00477"></a>00477 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00478"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adec5c7fed065328f3411cc6cc258ca16">00478</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adec5c7fed065328f3411cc6cc258ca16">HbrVertex&lt;T&gt;::~HbrVertex</a>() {
<a name="l00479"></a>00479     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4cb945eeb8114443dcbd2a122de00dc8">Destroy</a>();
<a name="l00480"></a>00480 }
<a name="l00481"></a>00481 
<a name="l00482"></a>00482 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00483"></a>00483 <span class="keywordtype">void</span>
<a name="l00484"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4cb945eeb8114443dcbd2a122de00dc8">00484</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4cb945eeb8114443dcbd2a122de00dc8">HbrVertex&lt;T&gt;::Destroy</a>() {
<a name="l00485"></a>00485     <span class="keywordflow">if</span> (!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a122776ec047869d79832f8a8a80ece30">destroyed</a>) {
<a name="l00486"></a>00486         <span class="comment">// Vertices are only safe for deletion if the number of incident</span>
<a name="l00487"></a>00487         <span class="comment">// edges is exactly zero.</span>
<a name="l00488"></a>00488         assert(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a> == 0);
<a name="l00489"></a>00489 
<a name="l00490"></a>00490         <span class="comment">// Delete parent reference to self</span>
<a name="l00491"></a>00491         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> == <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88afabdd929f7d7e02e6f1518c42676f0f2">k_ParentEdge</a> &amp;&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.edge) {
<a name="l00492"></a>00492             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.edge-&gt;RemoveChild();
<a name="l00493"></a>00493             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.edge = 0;
<a name="l00494"></a>00494         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> == <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88ab1a0eda41f30bb77176bfe43d6cddbe0">k_ParentFace</a> &amp;&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.face) {
<a name="l00495"></a>00495             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.face-&gt;RemoveChild();
<a name="l00496"></a>00496             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.face = 0;
<a name="l00497"></a>00497         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a93ccb022a31681ca7522b952b9e7fc57">parentType</a> == <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae8e0d41663fb3d9cfaddef05cd989c88a89fce11a585f7a1c4852b055f4e6f535">k_ParentVertex</a> &amp;&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex) {
<a name="l00498"></a>00498             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex-&gt;RemoveChild();
<a name="l00499"></a>00499             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#abccb5885b0021a859d26ac14f6e78ff8">parent</a>.vertex = 0;
<a name="l00500"></a>00500         }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502         <span class="comment">// Orphan the child vertex</span>
<a name="l00503"></a>00503         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>) {
<a name="l00504"></a>00504             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>-&gt;SetParent(static_cast&lt;HbrVertex*&gt;(0));
<a name="l00505"></a>00505             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a> = 0;
<a name="l00506"></a>00506         }
<a name="l00507"></a>00507         <span class="comment">// We&apos;re skipping the placement destructors here, in the</span>
<a name="l00508"></a>00508         <span class="comment">// assumption that HbrFVarData&apos;s destructor doesn&apos;t actually do</span>
<a name="l00509"></a>00509         <span class="comment">// anything much</span>
<a name="l00510"></a>00510         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a>) {
<a name="l00511"></a>00511             free(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a>);
<a name="l00512"></a>00512             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a> = 0;
<a name="l00513"></a>00513         }
<a name="l00514"></a>00514         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a122776ec047869d79832f8a8a80ece30">destroyed</a> = 1;
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 }
<a name="l00517"></a>00517 
<a name="l00518"></a>00518 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00519"></a>00519 <span class="keywordtype">void</span>
<a name="l00520"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab6f3530628df0496af5a2ead6adb74c6">00520</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab6f3530628df0496af5a2ead6adb74c6">HbrVertex&lt;T&gt;::AddIncidentEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* edge) {
<a name="l00521"></a>00521     assert(edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#ac78adb75925d2e2cc89260ac72cb177e">GetOrgVertex</a>() == <span class="keyword">this</span>);
<a name="l00522"></a>00522 
<a name="l00523"></a>00523     <span class="comment">// First, maintain the property that all of the incident edges</span>
<a name="l00524"></a>00524     <span class="comment">// will always be a boundary edge if possible. If any of the</span>
<a name="l00525"></a>00525     <span class="comment">// incident edges are no longer boundaries at this point then they</span>
<a name="l00526"></a>00526     <span class="comment">// can be immediately removed.</span>
<a name="l00527"></a>00527     <span class="keywordtype">int</span> i, newEdgeCount = 0;
<a name="l00528"></a>00528     <span class="keywordtype">bool</span> edgeFound = <span class="keyword">false</span>;
<a name="l00529"></a>00529     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a>; ++i) {
<a name="l00530"></a>00530         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i] == edge) {
<a name="l00531"></a>00531             edgeFound = <span class="keyword">true</span>;
<a name="l00532"></a>00532         }
<a name="l00533"></a>00533         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i]-&gt;IsBoundary()) {
<a name="l00534"></a>00534             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[newEdgeCount++] = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00535"></a>00535         } <span class="keywordflow">else</span> {
<a name="l00536"></a>00536             <span class="comment">// Did this edge suddenly stop being a boundary because</span>
<a name="l00537"></a>00537             <span class="comment">// the newly introduced edge (or something close to it)</span>
<a name="l00538"></a>00538             <span class="comment">// closed a cycle? If so, we don&apos;t want to lose a pointer</span>
<a name="l00539"></a>00539             <span class="comment">// to this edge cycle!  So check to see if this cycle is</span>
<a name="l00540"></a>00540             <span class="comment">// complete, and if so, keep it.</span>
<a name="l00541"></a>00541             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00542"></a>00542             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* edge = start;
<a name="l00543"></a>00543             <span class="keywordtype">bool</span> prevmatch = <span class="keyword">false</span>;
<a name="l00544"></a>00544             <span class="keywordflow">do</span> {
<a name="l00545"></a>00545                 edge = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge);
<a name="l00546"></a>00546                 <span class="comment">// Check all previous incident edges, if already</span>
<a name="l00547"></a>00547                 <span class="comment">// encountered then we have an edge to this cycle and</span>
<a name="l00548"></a>00548                 <span class="comment">// don&apos;t need to proceed further with this check</span>
<a name="l00549"></a>00549                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; i; ++j) {
<a name="l00550"></a>00550                     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[j] == edge) {
<a name="l00551"></a>00551                         prevmatch = <span class="keyword">true</span>;
<a name="l00552"></a>00552                         <span class="keywordflow">break</span>;
<a name="l00553"></a>00553                     }
<a name="l00554"></a>00554                 }
<a name="l00555"></a>00555             } <span class="keywordflow">while</span> (!prevmatch &amp;&amp; edge &amp;&amp; edge != start);
<a name="l00556"></a>00556             <span class="keywordflow">if</span> (!prevmatch &amp;&amp; edge &amp;&amp; edge == start) {
<a name="l00557"></a>00557 
<a name="l00558"></a>00558                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[newEdgeCount++] = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00559"></a>00559             }
<a name="l00560"></a>00560         }
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562 
<a name="l00563"></a>00563     <span class="comment">// If we are now left with no incident edges, then this edge</span>
<a name="l00564"></a>00564     <span class="comment">// becomes the sole incident edge (since we always need somewhere</span>
<a name="l00565"></a>00565     <span class="comment">// to start, even if it&apos;s a uninterrupted cycle [ie it doesn&apos;t</span>
<a name="l00566"></a>00566     <span class="comment">// matter whether the edge is a boundary]). Restore incidentEdges</span>
<a name="l00567"></a>00567     <span class="comment">// array to point to the end of the object.</span>
<a name="l00568"></a>00568     <span class="keywordflow">if</span> (newEdgeCount == 0) {
<a name="l00569"></a>00569         <span class="keywordflow">if</span> (!(edgeFound &amp;&amp; nIncidentEdges == 1)) {
<a name="l00570"></a>00570             <span class="keywordflow">if</span> (nIncidentEdges &gt; 1) {
<a name="l00571"></a>00571                 <span class="keyword">delete</span> [] <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l00572"></a>00572             }
<a name="l00573"></a>00573             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this));
<a name="l00574"></a>00574             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0] = edge;
<a name="l00575"></a>00575             nIncidentEdges = 1;
<a name="l00576"></a>00576         }
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578 
<a name="l00579"></a>00579     <span class="comment">// Otherwise, we already have a set of incident edges - we only</span>
<a name="l00580"></a>00580     <span class="comment">// add this edge if it&apos;s a boundary edge, which would begin a new</span>
<a name="l00581"></a>00581     <span class="comment">// cycle.</span>
<a name="l00582"></a>00582     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a9f48becfc6b2dacd2f0db283332ab0d3">IsBoundary</a>()) {
<a name="l00583"></a>00583         <span class="keywordflow">if</span> (!edgeFound) {
<a name="l00584"></a>00584             <span class="comment">// Must add the new edge. May need to reallocate here.</span>
<a name="l00585"></a>00585             <span class="keywordflow">if</span> (newEdgeCount + 1 != nIncidentEdges) {
<a name="l00586"></a>00586                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>** newIncidentEdges = 0;
<a name="l00587"></a>00587                 <span class="keywordflow">if</span> (newEdgeCount + 1 &gt; 1) {
<a name="l00588"></a>00588                     newIncidentEdges = <span class="keyword">new</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*[newEdgeCount + 1];
<a name="l00589"></a>00589                 } <span class="keywordflow">else</span> {
<a name="l00590"></a>00590                     newIncidentEdges = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this));
<a name="l00591"></a>00591                 }
<a name="l00592"></a>00592                 <span class="keywordflow">for</span> (i = 0; i &lt; newEdgeCount; ++i) {
<a name="l00593"></a>00593                     newIncidentEdges[i] = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00594"></a>00594                 }
<a name="l00595"></a>00595                 <span class="keywordflow">if</span> (nIncidentEdges &gt; 1) {
<a name="l00596"></a>00596                     <span class="keyword">delete</span>[] <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l00597"></a>00597                 }
<a name="l00598"></a>00598                 nIncidentEdges = newEdgeCount + 1;
<a name="l00599"></a>00599                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = newIncidentEdges;
<a name="l00600"></a>00600             }
<a name="l00601"></a>00601             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[newEdgeCount] = edge;
<a name="l00602"></a>00602         } <span class="keywordflow">else</span> {
<a name="l00603"></a>00603             <span class="comment">// Edge is already in our list, so we don&apos;t need to add it</span>
<a name="l00604"></a>00604             <span class="comment">// again. However, we may need to reallocate due to above</span>
<a name="l00605"></a>00605             <span class="comment">// cleaning of nonboundary edges</span>
<a name="l00606"></a>00606             <span class="keywordflow">if</span> (newEdgeCount != nIncidentEdges) {
<a name="l00607"></a>00607                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>** newIncidentEdges = 0;
<a name="l00608"></a>00608                 <span class="keywordflow">if</span> (newEdgeCount &gt; 1) {
<a name="l00609"></a>00609                     newIncidentEdges = <span class="keyword">new</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*[newEdgeCount];
<a name="l00610"></a>00610                 } <span class="keywordflow">else</span> {
<a name="l00611"></a>00611                     newIncidentEdges = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this));
<a name="l00612"></a>00612                 }
<a name="l00613"></a>00613                 <span class="keywordflow">for</span> (i = 0; i &lt; newEdgeCount; ++i) {
<a name="l00614"></a>00614                     newIncidentEdges[i] = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00615"></a>00615                 }
<a name="l00616"></a>00616                 <span class="keywordflow">if</span> (nIncidentEdges &gt; 1) {
<a name="l00617"></a>00617                     <span class="keyword">delete</span>[] <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l00618"></a>00618                 }
<a name="l00619"></a>00619                 nIncidentEdges = newEdgeCount;
<a name="l00620"></a>00620                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = newIncidentEdges;
<a name="l00621"></a>00621             }
<a name="l00622"></a>00622         }
<a name="l00623"></a>00623     }
<a name="l00624"></a>00624     <span class="keywordflow">else</span> {
<a name="l00625"></a>00625         <span class="comment">// Again, we may need to reallocate due to above cleaning of</span>
<a name="l00626"></a>00626         <span class="comment">// nonboundary edges</span>
<a name="l00627"></a>00627         <span class="keywordflow">if</span> (newEdgeCount != nIncidentEdges) {
<a name="l00628"></a>00628             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>** newIncidentEdges = 0;
<a name="l00629"></a>00629             <span class="keywordflow">if</span> (newEdgeCount &gt; 1) {
<a name="l00630"></a>00630                 newIncidentEdges = <span class="keyword">new</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*[newEdgeCount];
<a name="l00631"></a>00631             } <span class="keywordflow">else</span> {
<a name="l00632"></a>00632                 newIncidentEdges = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this));
<a name="l00633"></a>00633             }
<a name="l00634"></a>00634             <span class="keywordflow">for</span> (i = 0; i &lt; newEdgeCount; ++i) {
<a name="l00635"></a>00635                 newIncidentEdges[i] = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00636"></a>00636             }
<a name="l00637"></a>00637             <span class="keywordflow">if</span> (nIncidentEdges &gt; 1) {
<a name="l00638"></a>00638                 <span class="keyword">delete</span>[] <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l00639"></a>00639             }
<a name="l00640"></a>00640             nIncidentEdges = newEdgeCount;
<a name="l00641"></a>00641             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = newIncidentEdges;
<a name="l00642"></a>00642         }
<a name="l00643"></a>00643     }
<a name="l00644"></a>00644 
<a name="l00645"></a>00645     <span class="comment">// For non-boundary edges, ensure that the incident edge starting</span>
<a name="l00646"></a>00646     <span class="comment">// the cycle is the lowest possible edge. By doing this,</span>
<a name="l00647"></a>00647     <span class="comment">// operations like GetSurroundingEdges will be guaranteed to</span>
<a name="l00648"></a>00648     <span class="comment">// return the same order of edges/faces through multi-threading.</span>
<a name="l00649"></a>00649     <span class="keywordflow">if</span> (!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0]-&gt;IsBoundary()) {
<a name="l00650"></a>00650         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>();
<a name="l00651"></a>00651         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0] = start;
<a name="l00652"></a>00652         <a class="code" href="structOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFacePath.html">HbrFacePath</a> incidentEdgePath = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0]-&gt;GetFace()-&gt;GetPath();
<a name="l00653"></a>00653         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* e = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(start);
<a name="l00654"></a>00654         <span class="keywordflow">while</span> (e) {
<a name="l00655"></a>00655             <span class="keywordflow">if</span> (e == start) <span class="keywordflow">break</span>;
<a name="l00656"></a>00656             <a class="code" href="structOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFacePath.html">HbrFacePath</a> ePath = e-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a07d7cfb38839bd59015be4580ca08e71">GetFace</a>()-&gt;GetPath();
<a name="l00657"></a>00657             <span class="keywordflow">if</span> (ePath &lt; incidentEdgePath) {
<a name="l00658"></a>00658                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0] = e;
<a name="l00659"></a>00659                 incidentEdgePath = ePath;
<a name="l00660"></a>00660             }
<a name="l00661"></a>00661             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(e);
<a name="l00662"></a>00662             <span class="keywordflow">if</span> (!next) {
<a name="l00663"></a>00663                 e = e-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>();
<a name="l00664"></a>00664                 <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a07d7cfb38839bd59015be4580ca08e71">GetFace</a>()-&gt;GetPath() &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0]-&gt;GetFace()-&gt;GetPath()) {
<a name="l00665"></a>00665                     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0] = e;
<a name="l00666"></a>00666                 }
<a name="l00667"></a>00667                 <span class="keywordflow">break</span>;
<a name="l00668"></a>00668             } <span class="keywordflow">else</span> {
<a name="l00669"></a>00669                 e = next;
<a name="l00670"></a>00670             }
<a name="l00671"></a>00671         }
<a name="l00672"></a>00672     }
<a name="l00673"></a>00673 
<a name="l00674"></a>00674     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a>++;
<a name="l00675"></a>00675 }
<a name="l00676"></a>00676 
<a name="l00677"></a>00677 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00678"></a>00678 <span class="keywordtype">void</span>
<a name="l00679"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a01d07b473a3979778b8c1a63f634047d">00679</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a01d07b473a3979778b8c1a63f634047d">HbrVertex&lt;T&gt;::RemoveIncidentEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* edge) {
<a name="l00680"></a>00680 
<a name="l00681"></a>00681     <span class="keywordtype">int</span> i, j;
<a name="l00682"></a>00682 
<a name="l00683"></a>00683     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a>--;
<a name="l00684"></a>00684     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a>) {
<a name="l00685"></a>00685 
<a name="l00686"></a>00686         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* next;
<a name="l00687"></a>00687 
<a name="l00688"></a>00688         <span class="comment">// We may need to shuffle our halfedge cycles. First we check</span>
<a name="l00689"></a>00689         <span class="comment">// whether the edge being erased begins any edge cycles</span>
<a name="l00690"></a>00690         <span class="keywordtype">bool</span> edgeFound = <span class="keyword">false</span>;
<a name="l00691"></a>00691         next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge);
<a name="l00692"></a>00692 
<a name="l00693"></a>00693         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a>; ++i) {
<a name="l00694"></a>00694             <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i] == edge) {
<a name="l00695"></a>00695 
<a name="l00696"></a>00696                 <span class="comment">// Edge cycle found. Replace the edge with the next edge</span>
<a name="l00697"></a>00697                 <span class="comment">// in the cycle if possible.</span>
<a name="l00698"></a>00698                 <span class="keywordflow">if</span> (next) {
<a name="l00699"></a>00699                     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i] = next;
<a name="l00700"></a>00700                     <span class="comment">// We are done.</span>
<a name="l00701"></a>00701                     <span class="keywordflow">return</span>;
<a name="l00702"></a>00702                 }
<a name="l00703"></a>00703 
<a name="l00704"></a>00704                 <span class="comment">// If no next edge is found it means the entire cycle</span>
<a name="l00705"></a>00705                 <span class="comment">// has gone away.</span>
<a name="l00706"></a>00706                 edgeFound = <span class="keyword">true</span>;
<a name="l00707"></a>00707                 <span class="keywordflow">break</span>;
<a name="l00708"></a>00708             }
<a name="l00709"></a>00709         }
<a name="l00710"></a>00710 
<a name="l00711"></a>00711         <span class="comment">// The edge cycle needs to disappear</span>
<a name="l00712"></a>00712         <span class="keywordflow">if</span> (edgeFound) {
<a name="l00713"></a>00713             assert(nIncidentEdges &gt; 1);
<a name="l00714"></a>00714 
<a name="l00715"></a>00715             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>** newIncidentEdges = 0;
<a name="l00716"></a>00716             <span class="keywordflow">if</span> (nIncidentEdges - 1 &gt; 1) {
<a name="l00717"></a>00717                 newIncidentEdges = <span class="keyword">new</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*[nIncidentEdges - 1];
<a name="l00718"></a>00718             } <span class="keywordflow">else</span> {
<a name="l00719"></a>00719                 newIncidentEdges = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this));
<a name="l00720"></a>00720             }
<a name="l00721"></a>00721             j = 0;
<a name="l00722"></a>00722             <span class="keywordflow">for</span> (i = 0; i &lt; nIncidentEdges; ++i) {
<a name="l00723"></a>00723                 <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i] != edge) {
<a name="l00724"></a>00724                     newIncidentEdges[j++] = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00725"></a>00725                 }
<a name="l00726"></a>00726             }
<a name="l00727"></a>00727             assert(j == nIncidentEdges - 1);
<a name="l00728"></a>00728             <span class="keywordflow">if</span> (nIncidentEdges &gt; 1) {
<a name="l00729"></a>00729                 <span class="keyword">delete</span>[] <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l00730"></a>00730             }
<a name="l00731"></a>00731             nIncidentEdges--;
<a name="l00732"></a>00732             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = newIncidentEdges;
<a name="l00733"></a>00733             <span class="keywordflow">return</span>;
<a name="l00734"></a>00734         }
<a name="l00735"></a>00735         <span class="comment">// Now deal with the case where we remove an edge</span>
<a name="l00736"></a>00736         <span class="comment">// which did not begin a boundary edge cycle. If this</span>
<a name="l00737"></a>00737         <span class="comment">// happens then the resulting unbroken cycle does</span>
<a name="l00738"></a>00738         <span class="comment">// get broken; in that case we replace the incident</span>
<a name="l00739"></a>00739         <span class="comment">// edge with the next one after this.</span>
<a name="l00740"></a>00740         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nIncidentEdges == 1 &amp;&amp; !<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0]-&gt;IsBoundary()) {
<a name="l00741"></a>00741             <span class="keywordflow">if</span> (next) {
<a name="l00742"></a>00742                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0] = next;
<a name="l00743"></a>00743             } <span class="keywordflow">else</span> {
<a name="l00744"></a>00744                 <span class="comment">// hm, what does this mean for us? Not sure at the</span>
<a name="l00745"></a>00745                 <span class="comment">// moment.</span>
<a name="l00746"></a>00746                 std::cout &lt;&lt; <span class="stringliteral">&quot;Could not split cycle!\n&quot;</span>;
<a name="l00747"></a>00747                 assert(0);
<a name="l00748"></a>00748             }
<a name="l00749"></a>00749         }
<a name="l00750"></a>00750 
<a name="l00751"></a>00751         <span class="comment">// (Is this another case or a specialization of the above?)</span>
<a name="l00752"></a>00752         <span class="comment">// When an edge in the middle of a boundary cycle goes away we</span>
<a name="l00753"></a>00753         <span class="comment">// need to mark a new cycle.</span>
<a name="l00754"></a>00754         <span class="comment">//</span>
<a name="l00755"></a>00755         <span class="comment">// If there is no next edge, it means that we didn&apos;t</span>
<a name="l00756"></a>00756         <span class="comment">// actually split the cycle, we just deleted the last edge</span>
<a name="l00757"></a>00757         <span class="comment">// in the cycle. As such nothing needs to occur because</span>
<a name="l00758"></a>00758         <span class="comment">// the &quot;split&quot; is already present.</span>
<a name="l00759"></a>00759 
<a name="l00760"></a>00760         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a9f48becfc6b2dacd2f0db283332ab0d3">IsBoundary</a>() &amp;&amp; next) {
<a name="l00761"></a>00761             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>** newIncidentEdges = 0;
<a name="l00762"></a>00762             <span class="keywordflow">if</span> (nIncidentEdges + 1 &gt; 1) {
<a name="l00763"></a>00763                 newIncidentEdges = <span class="keyword">new</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*[nIncidentEdges + 1];
<a name="l00764"></a>00764             } <span class="keywordflow">else</span> {
<a name="l00765"></a>00765                 newIncidentEdges = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this));
<a name="l00766"></a>00766             }
<a name="l00767"></a>00767             <span class="keywordflow">for</span> (i = 0; i &lt; nIncidentEdges; ++i) {
<a name="l00768"></a>00768                 newIncidentEdges[i] = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00769"></a>00769             }
<a name="l00770"></a>00770             newIncidentEdges[nIncidentEdges] = next;
<a name="l00771"></a>00771             <span class="keywordflow">if</span> (nIncidentEdges &gt; 1) {
<a name="l00772"></a>00772                 <span class="keyword">delete</span>[] <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l00773"></a>00773             }
<a name="l00774"></a>00774             nIncidentEdges++;
<a name="l00775"></a>00775             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = newIncidentEdges;
<a name="l00776"></a>00776         }
<a name="l00777"></a>00777     } <span class="keywordflow">else</span> {
<a name="l00778"></a>00778         <span class="comment">// No references left, we can just clear all the cycles</span>
<a name="l00779"></a>00779         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> &gt; 1) {
<a name="l00780"></a>00780             <span class="keyword">delete</span>[] <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l00781"></a>00781             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this));
<a name="l00782"></a>00782         }
<a name="l00783"></a>00783         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> = 0;
<a name="l00784"></a>00784     }
<a name="l00785"></a>00785 }
<a name="l00786"></a>00786 
<a name="l00787"></a>00787 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00788"></a>00788 <span class="keywordtype">bool</span>
<a name="l00789"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4597a9d2af2b679672c8274b52079b59">00789</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a4597a9d2af2b679672c8274b52079b59">HbrVertex&lt;T&gt;::EdgeRemovalWillMakeSingular</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* edge)<span class="keyword"> const </span>{
<a name="l00790"></a>00790     <span class="comment">// Only edge left, or no incident edges at all (how?)</span>
<a name="l00791"></a>00791     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a> &lt;= 1 || <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> &lt;= 0) {
<a name="l00792"></a>00792         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00793"></a>00793     }
<a name="l00794"></a>00794     <span class="comment">// There are at least two existing cycles. We could maybe consider</span>
<a name="l00795"></a>00795     <span class="comment">// the case where removal of this edge will actually make one of</span>
<a name="l00796"></a>00796     <span class="comment">// the edge cycles go away, possibly leaving behind just one, but</span>
<a name="l00797"></a>00797     <span class="comment">// we&apos;ll ignore that possibility for now</span>
<a name="l00798"></a>00798     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> &gt; 1) {
<a name="l00799"></a>00799         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00800"></a>00800     }
<a name="l00801"></a>00801      <span class="comment">// This is the incident edge starting a single cycle. Removal of</span>
<a name="l00802"></a>00802      <span class="comment">// the edge will replace the start of the cycle with the next</span>
<a name="l00803"></a>00803      <span class="comment">// edge, and we keep a single cycle.</span>
<a name="l00804"></a>00804     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a> == 1 &amp;&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0] == edge) {
<a name="l00805"></a>00805         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00806"></a>00806     }
<a name="l00807"></a>00807     <span class="comment">// Check the single cycle: was it interrupted? (i.e. a</span>
<a name="l00808"></a>00808     <span class="comment">// boundary). If not interrupted, then deletion of any edge still</span>
<a name="l00809"></a>00809     <span class="comment">// leaves a single cycle. Otherwise: if the edge is the *last*</span>
<a name="l00810"></a>00810     <span class="comment">// edge in the cycle, we still don&apos;t need to split the any further</span>
<a name="l00811"></a>00811     <span class="comment">// cycle. Otherwise we must split the cycle, which would result in</span>
<a name="l00812"></a>00812     <span class="comment">// a singular vertex</span>
<a name="l00813"></a>00813     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0]-&gt;IsBoundary()) {
<a name="l00814"></a>00814         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00815"></a>00815     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge)) {
<a name="l00816"></a>00816         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00817"></a>00817     } <span class="keywordflow">else</span> {
<a name="l00818"></a>00818         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00819"></a>00819     }
<a name="l00820"></a>00820 }
<a name="l00821"></a>00821 
<a name="l00822"></a>00822 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00823"></a>00823 <span class="keywordtype">void</span>
<a name="l00824"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a16ccb6dfc2785b1f0ed81e1633c5b45a">00824</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a16ccb6dfc2785b1f0ed81e1633c5b45a">HbrVertex&lt;T&gt;::Finish</a>() {
<a name="l00825"></a>00825     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a87498a9a21ea33ac0fd9961226b76c14">extraordinary</a> = <span class="keyword">false</span>;
<a name="l00826"></a>00826     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html">HbrMesh&lt;T&gt;</a>* mesh = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>()) {
<a name="l00827"></a>00827         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a88e1c9ed85eb70295e9ec1d1ec3eec41">IsSingular</a>()) <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a52d8a32b2cd8212d7eee9531ccbd1562">splitSingular</a>();
<a name="l00828"></a>00828         assert(!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a88e1c9ed85eb70295e9ec1d1ec3eec41">IsSingular</a>());
<a name="l00829"></a>00829         <span class="keywordflow">if</span> (mesh-&gt;GetSubdivision()) {
<a name="l00830"></a>00830             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a87498a9a21ea33ac0fd9961226b76c14">extraordinary</a> = mesh-&gt;GetSubdivision()-&gt;VertexIsExtraordinary(mesh, <span class="keyword">this</span>);
<a name="l00831"></a>00831         }
<a name="l00832"></a>00832     }
<a name="l00833"></a>00833 }
<a name="l00834"></a>00834 
<a name="l00835"></a>00835 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00836"></a>00836 <span class="keywordtype">int</span>
<a name="l00837"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a54f0f6d5387a24b5625a5f0d0e3dc380">00837</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a54f0f6d5387a24b5625a5f0d0e3dc380">HbrVertex&lt;T&gt;::GetValence</a>()<span class="keyword"> const </span>{
<a name="l00838"></a>00838     <span class="keywordtype">int</span> valence = 0;
<a name="l00839"></a>00839     assert(!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a88e1c9ed85eb70295e9ec1d1ec3eec41">IsSingular</a>());
<a name="l00840"></a>00840     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0];
<a name="l00841"></a>00841     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l00842"></a>00842     <span class="keywordflow">if</span> (edge) <span class="keywordflow">do</span> {
<a name="l00843"></a>00843         valence++;
<a name="l00844"></a>00844         edge = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge);
<a name="l00845"></a>00845     } <span class="keywordflow">while</span> (edge &amp;&amp; edge != start);
<a name="l00846"></a>00846     <span class="comment">// In boundary cases, we increment the valence count by</span>
<a name="l00847"></a>00847     <span class="comment">// one more</span>
<a name="l00848"></a>00848     <span class="keywordflow">if</span> (!edge) valence++;
<a name="l00849"></a>00849     <span class="keywordflow">return</span> valence;
<a name="l00850"></a>00850 }
<a name="l00851"></a>00851 
<a name="l00852"></a>00852 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00853"></a>00853 <span class="keywordtype">int</span>
<a name="l00854"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af2f9c476c3b23850561404c1b501d1ec">00854</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af2f9c476c3b23850561404c1b501d1ec">HbrVertex&lt;T&gt;::GetCoarseValence</a>()<span class="keyword"> const </span>{
<a name="l00855"></a>00855     <span class="keywordtype">int</span> valence = 0;
<a name="l00856"></a>00856     assert(!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a88e1c9ed85eb70295e9ec1d1ec3eec41">IsSingular</a>());
<a name="l00857"></a>00857     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0];
<a name="l00858"></a>00858     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l00859"></a>00859     <span class="keywordflow">if</span> (edge) <span class="keywordflow">do</span> {
<a name="l00860"></a>00860         <span class="keywordflow">if</span> (edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#aecad964fd0ad4d1a9a2bfc0583fb00c2">IsCoarse</a>()) {
<a name="l00861"></a>00861             valence++;
<a name="l00862"></a>00862         }
<a name="l00863"></a>00863         edge = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge);
<a name="l00864"></a>00864     } <span class="keywordflow">while</span> (edge &amp;&amp; edge != start);
<a name="l00865"></a>00865     <span class="comment">// In boundary cases, we increment the valence count by one more</span>
<a name="l00866"></a>00866     <span class="comment">// (this assumes the last edge is coarse, which it had better be</span>
<a name="l00867"></a>00867     <span class="comment">// in the boundary case!)</span>
<a name="l00868"></a>00868     <span class="keywordflow">if</span> (!edge) valence++;
<a name="l00869"></a>00869     <span class="keywordflow">return</span> valence;
<a name="l00870"></a>00870 }
<a name="l00871"></a>00871 
<a name="l00872"></a>00872 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00873"></a>00873 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>&amp;
<a name="l00874"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae2b9eeea373112055d7bc5cb4d150703">00874</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae2b9eeea373112055d7bc5cb4d150703">HbrVertex&lt;T&gt;::GetFVarData</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* face) {
<a name="l00875"></a>00875     <span class="comment">// See if there are any extra facevarying datum associated with</span>
<a name="l00876"></a>00876     <span class="comment">// this vertex, and whether any of them match the face.</span>
<a name="l00877"></a>00877     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a>) {
<a name="l00878"></a>00878         <span class="keywordtype">size_t</span> fvtsize = <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>) + <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>()-&gt;GetTotalFVarWidth();
<a name="l00879"></a>00879         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a> *fvt = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a>;
<a name="l00880"></a>00880         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a>; ++i) {
<a name="l00881"></a>00881             <span class="keywordflow">if</span> (fvt-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html#a9a6364150ece6eabc523cdd88bcf58a7">GetFace</a>() == face) {
<a name="l00882"></a>00882                 <span class="keywordflow">return</span> *fvt;
<a name="l00883"></a>00883             }
<a name="l00884"></a>00884             fvt = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>*)((<span class="keywordtype">char</span>*) fvt + fvtsize);
<a name="l00885"></a>00885         }
<a name="l00886"></a>00886     }
<a name="l00887"></a>00887     <span class="comment">// Otherwise, return the default facevarying datum, which lives</span>
<a name="l00888"></a>00888     <span class="comment">// in the overallocated space after the end of this object</span>
<a name="l00889"></a>00889     <span class="keywordflow">return</span> *((<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>*) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this) + <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*)));
<a name="l00890"></a>00890 }
<a name="l00891"></a>00891 
<a name="l00892"></a>00892 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00893"></a>00893 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>&amp;
<a name="l00894"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3042b95b8aeea0a6606120667d9f4d89">00894</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3042b95b8aeea0a6606120667d9f4d89">HbrVertex&lt;T&gt;::NewFVarData</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* face) {
<a name="l00895"></a>00895     <span class="keyword">const</span> <span class="keywordtype">int</span> fvarwidth = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>()-&gt;GetTotalFVarWidth();
<a name="l00896"></a>00896     <span class="keywordtype">size_t</span> fvtsize = <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>) + fvarwidth * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>);
<a name="l00897"></a>00897 
<a name="l00898"></a>00898     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a>) {
<a name="l00899"></a>00899         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a> *newfvardata = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>*) malloc((<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a> + 1) * fvtsize);
<a name="l00900"></a>00900         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a> *newfvt = newfvardata, *oldfvt = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a>;
<a name="l00901"></a>00901         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a>; ++i) {
<a name="l00902"></a>00902             <span class="keyword">new</span> (newfvt) <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>((<span class="keywordtype">float</span>*) ((<span class="keywordtype">char</span>*) newfvt + <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>)));
<a name="l00903"></a>00903             newfvt-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html#aaf84d6d4672e165013b78b5c39ee7781">SetAllData</a>(fvarwidth, oldfvt-&gt;GetData(0));
<a name="l00904"></a>00904             newfvt-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html#a0dfc80d6cf0680d2e5616f11a4a80a95">SetFace</a>(oldfvt-&gt;GetFace());
<a name="l00905"></a>00905             oldfvt = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>*)((<span class="keywordtype">char</span>*) oldfvt + fvtsize);
<a name="l00906"></a>00906             newfvt = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>*)((<span class="keywordtype">char</span>*) newfvt + fvtsize);
<a name="l00907"></a>00907         }
<a name="l00908"></a>00908         <span class="keyword">new</span> (newfvt) <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>((<span class="keywordtype">float</span>*) ((<span class="keywordtype">char</span>*) newfvt + <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>)));
<a name="l00909"></a>00909         newfvt-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html#a0dfc80d6cf0680d2e5616f11a4a80a95">SetFace</a>(face);
<a name="l00910"></a>00910         free(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a>);
<a name="l00911"></a>00911         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a> = newfvardata;
<a name="l00912"></a>00912         nfvardata++;
<a name="l00913"></a>00913         <span class="keywordflow">return</span> *newfvt;
<a name="l00914"></a>00914     } <span class="keywordflow">else</span> {
<a name="l00915"></a>00915         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a> = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>*) malloc(fvtsize);
<a name="l00916"></a>00916         <span class="keyword">new</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a>) <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>((<span class="keywordtype">float</span>*) ((<span class="keywordtype">char</span>*) <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a> + <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFVarData.html">HbrFVarData&lt;T&gt;</a>)));
<a name="l00917"></a>00917         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a>-&gt;SetFace(face);
<a name="l00918"></a>00918         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a7168f0adba83e98f75c48578ea9867cc">nfvardata</a> = 1;
<a name="l00919"></a>00919         <span class="keywordflow">return</span> *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab46e53615f3797c2c96858aa8cf6813d">morefvardata</a>;
<a name="l00920"></a>00920     }
<a name="l00921"></a>00921 }
<a name="l00922"></a>00922 
<a name="l00923"></a>00923 
<a name="l00924"></a>00924 
<a name="l00925"></a>00925 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00926"></a>00926 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>*
<a name="l00927"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af5b5c989455fee3e7d0f773883d73f8d">00927</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af5b5c989455fee3e7d0f773883d73f8d">HbrVertex&lt;T&gt;::GetFace</a>()<span class="keyword"> const </span>{
<a name="l00928"></a>00928     <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>()-&gt;GetFace();
<a name="l00929"></a>00929 }
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00932"></a>00932 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html">HbrMesh&lt;T&gt;</a>*
<a name="l00933"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">00933</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">HbrVertex&lt;T&gt;::GetMesh</a>()<span class="keyword"> const </span>{
<a name="l00934"></a>00934     <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#af5b5c989455fee3e7d0f773883d73f8d">GetFace</a>()-&gt;GetMesh();
<a name="l00935"></a>00935 }
<a name="l00936"></a>00936 
<a name="l00937"></a>00937 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00938"></a>00938 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*
<a name="l00939"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab41df701002e9db49952da0f393fcbd3">00939</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab41df701002e9db49952da0f393fcbd3">HbrVertex&lt;T&gt;::GetEdge</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* dest)<span class="keyword"> const </span>{
<a name="l00940"></a>00940     <span class="comment">// Here, we generally want to go through all halfedge cycles</span>
<a name="l00941"></a>00941     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a>; ++i) {
<a name="l00942"></a>00942         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* cycle = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l00943"></a>00943         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = cycle;
<a name="l00944"></a>00944         <span class="keywordflow">if</span> (edge) <span class="keywordflow">do</span> {
<a name="l00945"></a>00945             <span class="keywordflow">if</span> (edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a79ea81e8d62bed001d59da636e6c1c94">GetDestVertex</a>() == dest) {
<a name="l00946"></a>00946                 <span class="keywordflow">return</span> edge;
<a name="l00947"></a>00947             }
<a name="l00948"></a>00948             edge = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge);
<a name="l00949"></a>00949         } <span class="keywordflow">while</span> (edge &amp;&amp; edge != cycle);
<a name="l00950"></a>00950     }
<a name="l00951"></a>00951     <span class="keywordflow">return</span> 0;
<a name="l00952"></a>00952 }
<a name="l00953"></a>00953 
<a name="l00954"></a>00954 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00955"></a>00955 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*
<a name="l00956"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">00956</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">HbrVertex&lt;T&gt;::GetNextEdge</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* edge)<span class="keyword"> const </span>{
<a name="l00957"></a>00957     <span class="comment">// Paranoia:</span>
<a name="l00958"></a>00958     <span class="comment">//    if (edge-&gt;GetOrgVertex() != this) return 0;</span>
<a name="l00959"></a>00959     <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>()-&gt;GetOpposite();
<a name="l00960"></a>00960 }
<a name="l00961"></a>00961 
<a name="l00962"></a>00962 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00963"></a>00963 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*
<a name="l00964"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a5c37c8a85206b22b89997a181f41ca2d">00964</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a5c37c8a85206b22b89997a181f41ca2d">HbrVertex&lt;T&gt;::GetPreviousEdge</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* edge)<span class="keyword"> const </span>{
<a name="l00965"></a>00965     <span class="comment">// Paranoia:</span>
<a name="l00966"></a>00966     <span class="comment">//    if (edge-&gt;GetOrgVertex() != this) return 0;</span>
<a name="l00967"></a>00967     <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a3a1283bef6cbd172053ba59aa84ff5e9">GetOpposite</a>()-&gt;GetNext();
<a name="l00968"></a>00968 }
<a name="l00969"></a>00969 
<a name="l00970"></a>00970 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00971"></a>00971 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>*
<a name="l00972"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbf455b61a13417ea15c9069e3e52bdb">00972</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbf455b61a13417ea15c9069e3e52bdb">HbrVertex&lt;T&gt;::GetQEONext</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* dest)<span class="keyword"> const </span>{
<a name="l00973"></a>00973     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab41df701002e9db49952da0f393fcbd3">GetEdge</a>(dest);
<a name="l00974"></a>00974     <span class="keywordflow">if</span> (edge) {
<a name="l00975"></a>00975         <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>()-&gt;GetOrgVertex();
<a name="l00976"></a>00976     }
<a name="l00977"></a>00977     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *next;
<a name="l00978"></a>00978     edge = start;
<a name="l00979"></a>00979     <span class="keywordflow">while</span> (edge) {
<a name="l00980"></a>00980         next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge);
<a name="l00981"></a>00981         <span class="keywordflow">if</span> (edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a79ea81e8d62bed001d59da636e6c1c94">GetDestVertex</a>() == dest) {
<a name="l00982"></a>00982             <span class="keywordflow">if</span> (!next) {
<a name="l00983"></a>00983                 <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>()-&gt;GetOrgVertex();
<a name="l00984"></a>00984             } <span class="keywordflow">else</span> {
<a name="l00985"></a>00985                 <span class="keywordflow">return</span> next-&gt;GetDestVertex();
<a name="l00986"></a>00986             }
<a name="l00987"></a>00987         }
<a name="l00988"></a>00988         <span class="keywordflow">if</span> (next == start) {
<a name="l00989"></a>00989             <span class="keywordflow">return</span> 0;
<a name="l00990"></a>00990         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!next) {
<a name="l00991"></a>00991             <span class="keywordflow">if</span> (edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>()-&gt;GetOrgVertex() == dest) {
<a name="l00992"></a>00992                 <span class="keywordflow">return</span> start-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a79ea81e8d62bed001d59da636e6c1c94">GetDestVertex</a>();
<a name="l00993"></a>00993             } <span class="keywordflow">else</span> {
<a name="l00994"></a>00994                 <span class="keywordflow">return</span> 0;
<a name="l00995"></a>00995             }
<a name="l00996"></a>00996         } <span class="keywordflow">else</span> {
<a name="l00997"></a>00997             edge = next;
<a name="l00998"></a>00998         }
<a name="l00999"></a>00999     }
<a name="l01000"></a>01000     <span class="comment">// Shouldn&apos;t get here</span>
<a name="l01001"></a>01001     <span class="keywordflow">return</span> 0;
<a name="l01002"></a>01002 }
<a name="l01003"></a>01003 
<a name="l01004"></a>01004 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01005"></a>01005 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>*
<a name="l01006"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#acfdc25e89def603d8d0cb47edb981d3b">01006</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbf455b61a13417ea15c9069e3e52bdb">HbrVertex&lt;T&gt;::GetQEONext</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* edge)<span class="keyword"> const </span>{
<a name="l01007"></a>01007     assert(edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#ac78adb75925d2e2cc89260ac72cb177e">GetOrgVertex</a>() == <span class="keyword">this</span>);
<a name="l01008"></a>01008     <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>()-&gt;GetOrgVertex();
<a name="l01009"></a>01009 }
<a name="l01010"></a>01010 
<a name="l01011"></a>01011 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01012"></a>01012 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>*
<a name="l01013"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad45f133d675572fc3e33e8de48b55ca1">01013</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a445dab40035ec18361e650af3d1828a6">HbrVertex&lt;T&gt;::GetQEOPrev</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* dest)<span class="keyword"> const </span>{
<a name="l01014"></a>01014     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab41df701002e9db49952da0f393fcbd3">GetEdge</a>(dest);
<a name="l01015"></a>01015     <span class="keywordflow">if</span> (edge) {
<a name="l01016"></a>01016         <span class="keywordflow">if</span> (edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a3a1283bef6cbd172053ba59aa84ff5e9">GetOpposite</a>()) {
<a name="l01017"></a>01017             <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a3a1283bef6cbd172053ba59aa84ff5e9">GetOpposite</a>()-&gt;GetNext()-&gt;GetDestVertex();
<a name="l01018"></a>01018         } <span class="keywordflow">else</span> {
<a name="l01019"></a>01019             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *next;
<a name="l01020"></a>01020             edge = start;
<a name="l01021"></a>01021             <span class="keywordflow">while</span> (edge) {
<a name="l01022"></a>01022                 next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge);
<a name="l01023"></a>01023                 <span class="keywordflow">if</span> (next == start) {
<a name="l01024"></a>01024                     <span class="keywordflow">if</span> (next-&gt;GetDestVertex() == dest) {
<a name="l01025"></a>01025                         <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a79ea81e8d62bed001d59da636e6c1c94">GetDestVertex</a>();
<a name="l01026"></a>01026                     } <span class="keywordflow">else</span> {
<a name="l01027"></a>01027                         <span class="keywordflow">return</span> 0;
<a name="l01028"></a>01028                     }
<a name="l01029"></a>01029                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!next) {
<a name="l01030"></a>01030                     <span class="keywordflow">if</span> (edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>()-&gt;GetOrgVertex() == dest) {
<a name="l01031"></a>01031                         <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a79ea81e8d62bed001d59da636e6c1c94">GetDestVertex</a>();
<a name="l01032"></a>01032                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (start-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a79ea81e8d62bed001d59da636e6c1c94">GetDestVertex</a>() == dest) {
<a name="l01033"></a>01033                         <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>()-&gt;GetOrgVertex();
<a name="l01034"></a>01034                     } <span class="keywordflow">else</span> {
<a name="l01035"></a>01035                         <span class="keywordflow">return</span> 0;
<a name="l01036"></a>01036                     }
<a name="l01037"></a>01037                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (next-&gt;GetDestVertex() == dest) {
<a name="l01038"></a>01038                     <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a79ea81e8d62bed001d59da636e6c1c94">GetDestVertex</a>();
<a name="l01039"></a>01039                 } <span class="keywordflow">else</span> {
<a name="l01040"></a>01040                     edge = next;
<a name="l01041"></a>01041                 }
<a name="l01042"></a>01042             }
<a name="l01043"></a>01043             <span class="keywordflow">return</span> 0;
<a name="l01044"></a>01044         }
<a name="l01045"></a>01045     }
<a name="l01046"></a>01046     edge = dest-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab41df701002e9db49952da0f393fcbd3">GetEdge</a>(<span class="keyword">this</span>);
<a name="l01047"></a>01047     <span class="keywordflow">if</span> (edge) {
<a name="l01048"></a>01048         <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#ab9bb82e0abcc7daaa8afffe46c9c5592">GetNext</a>()-&gt;GetDestVertex();
<a name="l01049"></a>01049     }
<a name="l01050"></a>01050     <span class="keywordflow">return</span> 0;
<a name="l01051"></a>01051 }
<a name="l01052"></a>01052 
<a name="l01053"></a>01053 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01054"></a>01054 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>*
<a name="l01055"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a445dab40035ec18361e650af3d1828a6">01055</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a445dab40035ec18361e650af3d1828a6">HbrVertex&lt;T&gt;::GetQEOPrev</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* edge)<span class="keyword"> const </span>{
<a name="l01056"></a>01056     assert(edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#ac78adb75925d2e2cc89260ac72cb177e">GetOrgVertex</a>() == <span class="keyword">this</span>);
<a name="l01057"></a>01057     <span class="keywordflow">if</span> (edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a3a1283bef6cbd172053ba59aa84ff5e9">GetOpposite</a>()) {
<a name="l01058"></a>01058         <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a3a1283bef6cbd172053ba59aa84ff5e9">GetOpposite</a>()-&gt;GetNext()-&gt;GetDestVertex();
<a name="l01059"></a>01059     } <span class="keywordflow">else</span> {
<a name="l01060"></a>01060         <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a445dab40035ec18361e650af3d1828a6">GetQEOPrev</a>(edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a79ea81e8d62bed001d59da636e6c1c94">GetDestVertex</a>());
<a name="l01061"></a>01061     }
<a name="l01062"></a>01062 }
<a name="l01063"></a>01063 
<a name="l01064"></a>01064 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01065"></a>01065 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>*
<a name="l01066"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab27e6c7ecdf9d3e6efd867a7219e616a">01066</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab27e6c7ecdf9d3e6efd867a7219e616a">HbrVertex&lt;T&gt;::GetQELNext</a>(<span class="keyword">const</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* dest)<span class="keyword"> const </span>{
<a name="l01067"></a>01067     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab41df701002e9db49952da0f393fcbd3">GetEdge</a>(dest);
<a name="l01068"></a>01068     <span class="keywordflow">if</span> (edge) {
<a name="l01069"></a>01069         <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#ab9bb82e0abcc7daaa8afffe46c9c5592">GetNext</a>()-&gt;GetDestVertex();
<a name="l01070"></a>01070     }
<a name="l01071"></a>01071     edge = dest-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab41df701002e9db49952da0f393fcbd3">GetEdge</a>(<span class="keyword">this</span>);
<a name="l01072"></a>01072     <span class="keywordflow">if</span> (edge) {
<a name="l01073"></a>01073         <span class="keywordflow">return</span> edge-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a7a8a784a19cce993df4f6a080f868011">GetPrev</a>()-&gt;GetOrgVertex();
<a name="l01074"></a>01074     }
<a name="l01075"></a>01075     <span class="keywordflow">return</span> 0;
<a name="l01076"></a>01076 }
<a name="l01077"></a>01077 
<a name="l01078"></a>01078 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01079"></a>01079 <span class="keywordtype">bool</span>
<a name="l01080"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa2d69e52a8f6798acfca7da322c01a71">01080</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa2d69e52a8f6798acfca7da322c01a71">HbrVertex&lt;T&gt;::OnBoundary</a>()<span class="keyword"> const </span>{
<a name="l01081"></a>01081     <span class="comment">// We really only need to check the first incident edge, since</span>
<a name="l01082"></a>01082     <span class="comment">// singular vertices by definition are on the boundary</span>
<a name="l01083"></a>01083     <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0]-&gt;IsBoundary();
<a name="l01084"></a>01084 }
<a name="l01085"></a>01085 
<a name="l01086"></a>01086 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01087"></a>01087 <span class="keywordtype">bool</span>
<a name="l01088"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbe113d4c22b4cde5a62dd01ef561b2b">01088</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbe113d4c22b4cde5a62dd01ef561b2b">HbrVertex&lt;T&gt;::IsFVarSmooth</a>(<span class="keywordtype">int</span> datum) {
<a name="l01089"></a>01089     <span class="keywordflow">return</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2fb5200431d9b8d7ffc111a89fb8fe7d">GetFVarMask</a>(datum) == <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a66cb531929fea8b8e6ccb92d3c9e86d4">k_Smooth</a>);
<a name="l01090"></a>01090 }
<a name="l01091"></a>01091 
<a name="l01092"></a>01092 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01093"></a>01093 <span class="keywordtype">bool</span>
<a name="l01094"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa8dbbb51ebb5add08dde898044d0653c">01094</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa8dbbb51ebb5add08dde898044d0653c">HbrVertex&lt;T&gt;::IsFVarAllSmooth</a>() {
<a name="l01095"></a>01095     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>()-&gt;GetFVarCount(); ++i) {
<a name="l01096"></a>01096         <span class="keywordflow">if</span> (!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#adbe113d4c22b4cde5a62dd01ef561b2b">IsFVarSmooth</a>(i)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01097"></a>01097     }
<a name="l01098"></a>01098     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01099"></a>01099 }
<a name="l01100"></a>01100 
<a name="l01101"></a>01101 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01102"></a>01102 <span class="keywordtype">bool</span>
<a name="l01103"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a086419dea7ebdb81180d9514be8cbac3">01103</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a086419dea7ebdb81180d9514be8cbac3">HbrVertex&lt;T&gt;::IsFVarDart</a>(<span class="keywordtype">int</span> datum) {
<a name="l01104"></a>01104     <span class="keywordflow">return</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2fb5200431d9b8d7ffc111a89fb8fe7d">GetFVarMask</a>(datum) == <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a78c97cd177fd12a7570eb1991fb63bea">k_Dart</a>);
<a name="l01105"></a>01105 }
<a name="l01106"></a>01106 
<a name="l01107"></a>01107 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01108"></a>01108 <span class="keywordtype">bool</span>
<a name="l01109"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a67a79bb79afc445650b21f55b702da59">01109</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a67a79bb79afc445650b21f55b702da59">HbrVertex&lt;T&gt;::IsFVarCorner</a>(<span class="keywordtype">int</span> datum) {
<a name="l01110"></a>01110 
<a name="l01111"></a>01111     <span class="comment">// If it&apos;s a dart, it&apos;s a corner</span>
<a name="l01112"></a>01112     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a086419dea7ebdb81180d9514be8cbac3">IsFVarDart</a>(datum)) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01113"></a>01113 
<a name="l01114"></a>01114     <span class="comment">// Run through surrounding edges, looking for two adjacent</span>
<a name="l01115"></a>01115     <span class="comment">// facevarying boundary edges</span>
<a name="l01116"></a>01116     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>, *nextedge;
<a name="l01117"></a>01117     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01118"></a>01118     <span class="keywordtype">bool</span> lastedgewassharp = <span class="keyword">false</span>;
<a name="l01119"></a>01119     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01120"></a>01120         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetFVarSharpness(datum)) {
<a name="l01121"></a>01121             <span class="keywordflow">if</span> (lastedgewassharp) {
<a name="l01122"></a>01122                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01123"></a>01123             } <span class="keywordflow">else</span> {
<a name="l01124"></a>01124                 lastedgewassharp = <span class="keyword">true</span>;
<a name="l01125"></a>01125             }
<a name="l01126"></a>01126         } <span class="keywordflow">else</span> {
<a name="l01127"></a>01127             lastedgewassharp = <span class="keyword">false</span>;
<a name="l01128"></a>01128         }
<a name="l01129"></a>01129         nextedge = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01130"></a>01130         <span class="keywordflow">if</span> (nextedge == start) {
<a name="l01131"></a>01131             <span class="keywordflow">return</span> start-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#af5d596eba176eeeacfbaa147c3c7c7c4">GetFVarSharpness</a>(datum) &amp;&amp; lastedgewassharp;
<a name="l01132"></a>01132         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!nextedge) {
<a name="l01133"></a>01133             <span class="comment">// Special case for the last edge in a cycle.</span>
<a name="l01134"></a>01134             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetPrev();
<a name="l01135"></a>01135             <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetFVarSharpness(datum) &amp;&amp; lastedgewassharp;
<a name="l01136"></a>01136         } <span class="keywordflow">else</span> {
<a name="l01137"></a>01137             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = nextedge;
<a name="l01138"></a>01138         }
<a name="l01139"></a>01139     }
<a name="l01140"></a>01140     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01141"></a>01141 }
<a name="l01142"></a>01142 
<a name="l01143"></a>01143 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01144"></a>01144 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>
<a name="l01145"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a30fd0c2809ce4dd00f5cc7756c5cb4c6">01145</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a30fd0c2809ce4dd00f5cc7756c5cb4c6">HbrVertex&lt;T&gt;::GetMask</a>(<span class="keywordtype">bool</span> next) {
<a name="l01146"></a>01146 
<a name="l01147"></a>01147     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa63eb30680028485265323f75f77841e">validmask</a>) {
<a name="l01148"></a>01148         <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(next ? <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a> : <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a>);
<a name="l01149"></a>01149     }
<a name="l01150"></a>01150 
<a name="l01151"></a>01151     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a> = 0;
<a name="l01152"></a>01152 
<a name="l01153"></a>01153     <span class="comment">// Mark volatility</span>
<a name="l01154"></a>01154     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a> &gt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a66cb531929fea8b8e6ccb92d3c9e86d4">k_Smooth</a> &amp;&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a> &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a935a286625c89155b671ed2cf90a165c">k_InfinitelySharp</a>)
<a name="l01155"></a>01155         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7f13096ee23b5d0286e54dccd13a1b9">volatil</a> = 1;
<a name="l01156"></a>01156 
<a name="l01157"></a>01157     <span class="comment">// If the vertex is tagged as sharp immediately promote its mask</span>
<a name="l01158"></a>01158     <span class="comment">// to corner</span>
<a name="l01159"></a>01159     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a188dfbc19292c70d10a3319ea41db1ba">IsSharp</a>(<span class="keyword">false</span>)) {
<a name="l01160"></a>01160         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a> += <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>;
<a name="l01161"></a>01161     }
<a name="l01162"></a>01162     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a188dfbc19292c70d10a3319ea41db1ba">IsSharp</a>(<span class="keyword">true</span>)) {
<a name="l01163"></a>01163         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a> += <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>;
<a name="l01164"></a>01164     }
<a name="l01165"></a>01165 
<a name="l01166"></a>01166     <span class="comment">// Count the number of surrounding sharp edges</span>
<a name="l01167"></a>01167     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>, *nextedge;
<a name="l01168"></a>01168     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01169"></a>01169     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01170"></a>01170         <span class="keywordtype">float</span> esharp = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetSharpness();
<a name="l01171"></a>01171 
<a name="l01172"></a>01172         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;IsSharp(<span class="keyword">false</span>)) {
<a name="l01173"></a>01173             <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a> &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>) {
<a name="l01174"></a>01174                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a>++;
<a name="l01175"></a>01175             }
<a name="l01176"></a>01176         }
<a name="l01177"></a>01177         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;IsSharp(<span class="keyword">true</span>)) {
<a name="l01178"></a>01178             <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a> &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>) {
<a name="l01179"></a>01179                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a>++;
<a name="l01180"></a>01180             }
<a name="l01181"></a>01181         }
<a name="l01182"></a>01182         <span class="comment">// If any incident edge is semisharp, mark the vertex as volatile</span>
<a name="l01183"></a>01183         <span class="keywordflow">if</span> (esharp &gt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;::k_Smooth</a> &amp;&amp; esharp &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;::k_InfinitelySharp</a>) {
<a name="l01184"></a>01184             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7f13096ee23b5d0286e54dccd13a1b9">volatil</a> = 1;
<a name="l01185"></a>01185         }
<a name="l01186"></a>01186         nextedge = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01187"></a>01187         <span class="keywordflow">if</span> (nextedge == start) {
<a name="l01188"></a>01188             <span class="keywordflow">break</span>;
<a name="l01189"></a>01189         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!nextedge) {
<a name="l01190"></a>01190             <span class="comment">// Special case for the last edge in a cycle.</span>
<a name="l01191"></a>01191             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetPrev();
<a name="l01192"></a>01192             esharp = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetSharpness();
<a name="l01193"></a>01193             <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;IsSharp(<span class="keyword">false</span>)) {
<a name="l01194"></a>01194                 <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a> &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>) {
<a name="l01195"></a>01195                     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a>++;
<a name="l01196"></a>01196                 }
<a name="l01197"></a>01197             }
<a name="l01198"></a>01198             <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;IsSharp(<span class="keyword">true</span>)) {
<a name="l01199"></a>01199                 <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a> &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>) {
<a name="l01200"></a>01200                     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a>++;
<a name="l01201"></a>01201                 }
<a name="l01202"></a>01202             }
<a name="l01203"></a>01203             <span class="keywordflow">if</span> (esharp &gt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;::k_Smooth</a> &amp;&amp; esharp &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;::k_InfinitelySharp</a>) {
<a name="l01204"></a>01204                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa7f13096ee23b5d0286e54dccd13a1b9">volatil</a> = 1;
<a name="l01205"></a>01205             }
<a name="l01206"></a>01206             <span class="keywordflow">break</span>;
<a name="l01207"></a>01207         } <span class="keywordflow">else</span> {
<a name="l01208"></a>01208             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = nextedge;
<a name="l01209"></a>01209         }
<a name="l01210"></a>01210     }
<a name="l01211"></a>01211     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa63eb30680028485265323f75f77841e">validmask</a> = 1;
<a name="l01212"></a>01212     <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(next ? <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3700eeb2bc659a5a3f518f14e88a6ac4">mask1</a> : <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a92165ca9b14762d18135e1ee8852bcaa">mask0</a>);
<a name="l01213"></a>01213 }
<a name="l01214"></a>01214 
<a name="l01215"></a>01215 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01216"></a>01216 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>
<a name="l01217"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2fb5200431d9b8d7ffc111a89fb8fe7d">01217</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2fb5200431d9b8d7ffc111a89fb8fe7d">HbrVertex&lt;T&gt;::GetFVarMask</a>(<span class="keywordtype">int</span> datum) {
<a name="l01218"></a>01218 
<a name="l01219"></a>01219     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mask = 0;
<a name="l01220"></a>01220 
<a name="l01221"></a>01221     <span class="comment">// If the vertex is tagged as sharp immediately promote its mask</span>
<a name="l01222"></a>01222     <span class="comment">// to corner</span>
<a name="l01223"></a>01223     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a188dfbc19292c70d10a3319ea41db1ba">IsSharp</a>(<span class="keyword">false</span>)) {
<a name="l01224"></a>01224         mask += <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>;
<a name="l01225"></a>01225     }
<a name="l01226"></a>01226 
<a name="l01227"></a>01227     <span class="comment">// Count the number of surrounding facevarying boundary edges</span>
<a name="l01228"></a>01228     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>, *nextedge;
<a name="l01229"></a>01229     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01230"></a>01230     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01231"></a>01231         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetFVarSharpness(datum)) {
<a name="l01232"></a>01232             <span class="keywordflow">if</span> (mask &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>) {
<a name="l01233"></a>01233                 mask++;
<a name="l01234"></a>01234             } <span class="keywordflow">else</span> {
<a name="l01235"></a>01235                 <span class="comment">// Can&apos;t get any sharper, so give up early</span>
<a name="l01236"></a>01236                 <span class="keywordflow">break</span>;
<a name="l01237"></a>01237             }
<a name="l01238"></a>01238         }
<a name="l01239"></a>01239         nextedge = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01240"></a>01240         <span class="keywordflow">if</span> (nextedge == start) {
<a name="l01241"></a>01241             <span class="keywordflow">break</span>;
<a name="l01242"></a>01242         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!nextedge) {
<a name="l01243"></a>01243             <span class="comment">// Special case for the last edge in a cycle.</span>
<a name="l01244"></a>01244             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetPrev();
<a name="l01245"></a>01245             <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetFVarSharpness(datum)) {
<a name="l01246"></a>01246                 <span class="keywordflow">if</span> (mask &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476ac5957bb2424fbb8caf2024208e2aaa82">k_Corner</a>) {
<a name="l01247"></a>01247                     mask++;
<a name="l01248"></a>01248                 }
<a name="l01249"></a>01249             }
<a name="l01250"></a>01250             <span class="keywordflow">break</span>;
<a name="l01251"></a>01251         } <span class="keywordflow">else</span> {
<a name="l01252"></a>01252             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = nextedge;
<a name="l01253"></a>01253         }
<a name="l01254"></a>01254     }
<a name="l01255"></a>01255     <span class="keywordflow">return</span> mask;
<a name="l01256"></a>01256 }
<a name="l01257"></a>01257 
<a name="l01258"></a>01258 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01259"></a>01259 <span class="keywordtype">float</span>
<a name="l01260"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab034ef6c49fcc1ce6233ff3d49c5e1ce">01260</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab034ef6c49fcc1ce6233ff3d49c5e1ce">HbrVertex&lt;T&gt;::GetFractionalMask</a>()<span class="keyword"> const </span>{
<a name="l01261"></a>01261     <span class="keywordtype">float</span> mask = 0;
<a name="l01262"></a>01262     <span class="keywordtype">float</span> n = 0;
<a name="l01263"></a>01263 
<a name="l01264"></a>01264     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a> &gt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a66cb531929fea8b8e6ccb92d3c9e86d4">k_Smooth</a> &amp;&amp; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a> &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a27d61a94494e506571b34e3c05e73476a78c97cd177fd12a7570eb1991fb63bea">k_Dart</a>) {
<a name="l01265"></a>01265         mask += <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a9befc412f7a0faebbf3d446eecdb5314">sharpness</a>; ++n;
<a name="l01266"></a>01266     }
<a name="l01267"></a>01267 
<a name="l01268"></a>01268     <span class="comment">// Add up the strengths of surrounding fractional sharp edges</span>
<a name="l01269"></a>01269     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>, *next;
<a name="l01270"></a>01270     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01271"></a>01271     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01272"></a>01272         <span class="keywordtype">float</span> esharp = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetSharpness();
<a name="l01273"></a>01273         <span class="keywordflow">if</span> (esharp &gt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;::k_Smooth</a> &amp;&amp; esharp &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;::k_Sharp</a>) {
<a name="l01274"></a>01274             mask += esharp; ++n;
<a name="l01275"></a>01275         }
<a name="l01276"></a>01276         next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01277"></a>01277         <span class="keywordflow">if</span> (next == start) {
<a name="l01278"></a>01278             <span class="keywordflow">break</span>;
<a name="l01279"></a>01279         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!next) {
<a name="l01280"></a>01280             <span class="comment">// Special case for the last edge in a cycle.</span>
<a name="l01281"></a>01281             esharp = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetPrev()-&gt;GetSharpness();
<a name="l01282"></a>01282             <span class="keywordflow">if</span> (esharp &gt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;::k_Smooth</a> &amp;&amp; esharp &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;::k_Sharp</a>) {
<a name="l01283"></a>01283                 mask += esharp; ++n;
<a name="l01284"></a>01284             }
<a name="l01285"></a>01285             <span class="keywordflow">break</span>;
<a name="l01286"></a>01286         } <span class="keywordflow">else</span> {
<a name="l01287"></a>01287             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = next;
<a name="l01288"></a>01288         }
<a name="l01289"></a>01289     }
<a name="l01290"></a>01290     assert (n &gt; 0.0f &amp;&amp; mask &lt; n);
<a name="l01291"></a>01291     <span class="keywordflow">return</span> (mask / n);
<a name="l01292"></a>01292 }
<a name="l01293"></a>01293 
<a name="l01294"></a>01294 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01295"></a>01295 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> OutputIterator&gt;
<a name="l01296"></a>01296 <span class="keywordtype">void</span>
<a name="l01297"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a60bea0d909f265ef04b3f1a0a9929470">01297</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a60bea0d909f265ef04b3f1a0a9929470">HbrVertex&lt;T&gt;::GetSurroundingEdges</a>(OutputIterator edges)<span class="keyword"> const </span>{
<a name="l01298"></a>01298     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>, *next;
<a name="l01299"></a>01299     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01300"></a>01300     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01301"></a>01301         *edges++ = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>;
<a name="l01302"></a>01302         next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01303"></a>01303         <span class="keywordflow">if</span> (next == start) {
<a name="l01304"></a>01304             <span class="keywordflow">break</span>;
<a name="l01305"></a>01305         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!next) {
<a name="l01306"></a>01306             <span class="comment">// Special case for the last edge in a cycle.</span>
<a name="l01307"></a>01307             *edges++ = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetPrev();
<a name="l01308"></a>01308             <span class="keywordflow">break</span>;
<a name="l01309"></a>01309         } <span class="keywordflow">else</span> {
<a name="l01310"></a>01310             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = next;
<a name="l01311"></a>01311         }
<a name="l01312"></a>01312     }
<a name="l01313"></a>01313 }
<a name="l01314"></a>01314 
<a name="l01315"></a>01315 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01316"></a>01316 <span class="keywordtype">void</span>
<a name="l01317"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab31a1bf2f255b8296faebdf8cfc68d45">01317</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab31a1bf2f255b8296faebdf8cfc68d45">HbrVertex&lt;T&gt;::ApplyOperatorSurroundingEdges</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedgeOperator.html">HbrHalfedgeOperator&lt;T&gt;</a> &amp;op)<span class="keyword"> const </span>{
<a name="l01318"></a>01318     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>, *next;
<a name="l01319"></a>01319     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01320"></a>01320     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01321"></a>01321         op(*<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01322"></a>01322         next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01323"></a>01323         <span class="keywordflow">if</span> (next == start) {
<a name="l01324"></a>01324             <span class="keywordflow">break</span>;
<a name="l01325"></a>01325         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!next) {
<a name="l01326"></a>01326             op(*<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetPrev());
<a name="l01327"></a>01327             <span class="keywordflow">break</span>;
<a name="l01328"></a>01328         } <span class="keywordflow">else</span> {
<a name="l01329"></a>01329             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = next;
<a name="l01330"></a>01330         }
<a name="l01331"></a>01331     }
<a name="l01332"></a>01332 }
<a name="l01333"></a>01333 
<a name="l01334"></a>01334 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01335"></a>01335 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> OutputIterator&gt;
<a name="l01336"></a>01336 <span class="keywordtype">void</span>
<a name="l01337"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa721dc69e0c5881b58085cec5d67543d">01337</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa721dc69e0c5881b58085cec5d67543d">HbrVertex&lt;T&gt;::GetSurroundingVertices</a>(OutputIterator vertices)<span class="keyword"> const </span>{
<a name="l01338"></a>01338     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>, *next;
<a name="l01339"></a>01339     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01340"></a>01340     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01341"></a>01341         *vertices++ = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetDestVertex();
<a name="l01342"></a>01342         next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01343"></a>01343         <span class="keywordflow">if</span> (next == start) {
<a name="l01344"></a>01344             <span class="keywordflow">break</span>;
<a name="l01345"></a>01345         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!next) {
<a name="l01346"></a>01346             <span class="comment">// Special case for the last edge in a cycle: the last</span>
<a name="l01347"></a>01347             <span class="comment">// vertex on that cycle is not the destination of an</span>
<a name="l01348"></a>01348             <span class="comment">// outgoing halfedge</span>
<a name="l01349"></a>01349             *vertices++ = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetPrev()-&gt;GetOrgVertex();
<a name="l01350"></a>01350             <span class="keywordflow">break</span>;
<a name="l01351"></a>01351         } <span class="keywordflow">else</span> {
<a name="l01352"></a>01352             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = next;
<a name="l01353"></a>01353         }
<a name="l01354"></a>01354     }
<a name="l01355"></a>01355 }
<a name="l01356"></a>01356 
<a name="l01357"></a>01357 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01358"></a>01358 <span class="keywordtype">void</span>
<a name="l01359"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a034e5809d6cd33bfff9a2adcc7c2082d">01359</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a034e5809d6cd33bfff9a2adcc7c2082d">HbrVertex&lt;T&gt;::ApplyOperatorSurroundingVertices</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertexOperator.html">HbrVertexOperator&lt;T&gt;</a> &amp;op)<span class="keyword"> const </span>{
<a name="l01360"></a>01360     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>, *next;
<a name="l01361"></a>01361     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01362"></a>01362     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01363"></a>01363         op(*<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetDestVertex());
<a name="l01364"></a>01364         next = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01365"></a>01365         <span class="keywordflow">if</span> (next == start) <span class="keywordflow">return</span>;
<a name="l01366"></a>01366         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!next) {
<a name="l01367"></a>01367             op(*<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetPrev()-&gt;GetOrgVertex());
<a name="l01368"></a>01368             <span class="keywordflow">return</span>;
<a name="l01369"></a>01369         } <span class="keywordflow">else</span> {
<a name="l01370"></a>01370             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = next;
<a name="l01371"></a>01371         }
<a name="l01372"></a>01372     }
<a name="l01373"></a>01373 }
<a name="l01374"></a>01374 
<a name="l01375"></a>01375 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01376"></a>01376 <span class="keywordtype">void</span>
<a name="l01377"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2cbcd944525fdf2b745d05eec23ab3f2">01377</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2cbcd944525fdf2b745d05eec23ab3f2">HbrVertex&lt;T&gt;::ApplyOperatorSurroundingFaces</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFaceOperator.html">HbrFaceOperator&lt;T&gt;</a> &amp;op)<span class="keyword"> const </span>{
<a name="l01378"></a>01378     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>;
<a name="l01379"></a>01379     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01380"></a>01380     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01381"></a>01381         op(*<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetLeftFace());
<a name="l01382"></a>01382         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(edge);
<a name="l01383"></a>01383         <span class="keywordflow">if</span> (edge == start) <span class="keywordflow">break</span>;
<a name="l01384"></a>01384     }
<a name="l01385"></a>01385 }
<a name="l01386"></a>01386 
<a name="l01387"></a>01387 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01388"></a>01388 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>*
<a name="l01389"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a36aef7461781226e1bcb3cecd535b7b7">01389</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a36aef7461781226e1bcb3cecd535b7b7">HbrVertex&lt;T&gt;::Subdivide</a>() {
<a name="l01390"></a>01390     <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>) <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>;
<a name="l01391"></a>01391     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html">HbrMesh&lt;T&gt;</a>* mesh = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>();
<a name="l01392"></a>01392     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a> = mesh-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html#a3512df4f2ecb475e2b5bb9dbed4fb2d1">GetSubdivision</a>()-&gt;Subdivide(mesh, <span class="keyword">this</span>);
<a name="l01393"></a>01393     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>-&gt;SetParent(<span class="keyword">this</span>);
<a name="l01394"></a>01394     <span class="keywordflow">return</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a6050026cc047614dc883f691908f0655">vchild</a>;
<a name="l01395"></a>01395 }
<a name="l01396"></a>01396 
<a name="l01397"></a>01397 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01398"></a>01398 <span class="keywordtype">void</span>
<a name="l01399"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#acd6bb9ac89bac06b124d53008205be25">01399</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#acd6bb9ac89bac06b124d53008205be25">HbrVertex&lt;T&gt;::Refine</a>() {
<a name="l01400"></a>01400     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html">HbrMesh&lt;T&gt;</a>* mesh = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>();
<a name="l01401"></a>01401     mesh-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html#a3512df4f2ecb475e2b5bb9dbed4fb2d1">GetSubdivision</a>()-&gt;RefineAtVertex(mesh, <span class="keyword">this</span>);
<a name="l01402"></a>01402 }
<a name="l01403"></a>01403 
<a name="l01404"></a>01404 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01405"></a>01405 <span class="keywordtype">void</span>
<a name="l01406"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3eb19d571d6b403d62770f19781016c1">01406</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3eb19d571d6b403d62770f19781016c1">HbrVertex&lt;T&gt;::GuaranteeNeighbors</a>() {
<a name="l01407"></a>01407     <span class="keywordflow">if</span> (!<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3833bba2af7f57c869e90f03ab9fc7a5">neighborsguaranteed</a>) {
<a name="l01408"></a>01408         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html">HbrMesh&lt;T&gt;</a>* mesh = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>();
<a name="l01409"></a>01409         mesh-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html#a3512df4f2ecb475e2b5bb9dbed4fb2d1">GetSubdivision</a>()-&gt;GuaranteeNeighbors(mesh, <span class="keyword">this</span>);
<a name="l01410"></a>01410         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3833bba2af7f57c869e90f03ab9fc7a5">neighborsguaranteed</a> = 1;
<a name="l01411"></a>01411 
<a name="l01412"></a>01412         <span class="comment">// At this point we can apply vertex edits because we have all</span>
<a name="l01413"></a>01413         <span class="comment">// surrounding faces, and know whether any of them has</span>
<a name="l01414"></a>01414         <span class="comment">// necessary edit information (they would have set our</span>
<a name="l01415"></a>01415         <span class="comment">// hasvertexedit bit)</span>
<a name="l01416"></a>01416         <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ac3ac17e15596b739efd3263caa7e0768">hasvertexedit</a> &amp;&amp; !<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a920650ea1b49d2f125fbf8a490e49d62">editsapplied</a>) {
<a name="l01417"></a>01417             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a3f5ce11ca55c13416b6ca41023636ffe">GetIncidentEdge</a>(), *<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>;
<a name="l01418"></a>01418             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = start;
<a name="l01419"></a>01419             <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>) {
<a name="l01420"></a>01420                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html">HbrFace&lt;T&gt;</a>* <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34561d473bfc658aa613181103d86d61">face</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>-&gt;GetLeftFace();
<a name="l01421"></a>01421                 <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHierarchicalEdit.html">HbrHierarchicalEdit&lt;T&gt;</a>** edits = face-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrFace.html#a400bb8bcc2067ffa61f9c2672a047f07">GetHierarchicalEdits</a>()) {
<a name="l01422"></a>01422                     <span class="keywordflow">while</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHierarchicalEdit.html">HbrHierarchicalEdit&lt;T&gt;</a>* edit = *edits) {
<a name="l01423"></a>01423                         <span class="keywordflow">if</span> (!edit-&gt;IsRelevantToFace(face)) <span class="keywordflow">break</span>;
<a name="l01424"></a>01424                         edit-&gt;ApplyEditToVertex(face, <span class="keyword">this</span>);
<a name="l01425"></a>01425                         edits++;
<a name="l01426"></a>01426                     }
<a name="l01427"></a>01427                 }
<a name="l01428"></a>01428                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a>);
<a name="l01429"></a>01429                 <span class="keywordflow">if</span> (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad403a5ce623e679097a88da394a7f892">edge</a> == start) <span class="keywordflow">break</span>;
<a name="l01430"></a>01430             }
<a name="l01431"></a>01431             <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a920650ea1b49d2f125fbf8a490e49d62">editsapplied</a> = 1;
<a name="l01432"></a>01432         }
<a name="l01433"></a>01433     }
<a name="l01434"></a>01434 }
<a name="l01435"></a>01435 
<a name="l01436"></a>01436 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01437"></a>01437 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>
<a name="l01438"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a821e50af61075a431beec8d28832a3ad">01438</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a821e50af61075a431beec8d28832a3ad">HbrVertex&lt;T&gt;::GetMemStats</a>()<span class="keyword"> const </span>{
<a name="l01439"></a>01439     <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>);
<a name="l01440"></a>01440 }
<a name="l01441"></a>01441 
<a name="l01442"></a>01442 
<a name="l01443"></a>01443 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01444"></a>01444 <span class="keywordtype">void</span>
<a name="l01445"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a52d8a32b2cd8212d7eee9531ccbd1562">01445</a> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a52d8a32b2cd8212d7eee9531ccbd1562">HbrVertex&lt;T&gt;::splitSingular</a>() {
<a name="l01446"></a>01446     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html">HbrMesh&lt;T&gt;</a>* mesh = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa678d9699cd78d264f341146d8964774">GetMesh</a>();
<a name="l01447"></a>01447     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* e;
<a name="l01448"></a>01448 
<a name="l01449"></a>01449     <span class="comment">// Go through each edge cycle after the first</span>
<a name="l01450"></a>01450     std::vector&lt;HbrHalfedge&lt;T&gt;*&gt; edges;
<a name="l01451"></a>01451     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ae354989139e335d8ce5bebc7f18408a3">nIncidentEdges</a>; ++i) {
<a name="l01452"></a>01452 
<a name="l01453"></a>01453         <span class="comment">// Create duplicate vertex</span>
<a name="l01454"></a>01454         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a>* w = mesh-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrMesh.html#ae79f72cefa855dbe1433454bb8cc4940">NewVertex</a>();
<a name="l01455"></a>01455         w-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34eab1b6dfc8e3d71a222bacc53ec95c">GetData</a>().AddWithWeight(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a34eab1b6dfc8e3d71a222bacc53ec95c">GetData</a>(), 1.0);
<a name="l01456"></a>01456         w-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#aa4fc769836ffaa02026865300956bc29">SetSharpness</a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a456cc893d5c51d093d4cab907f68f175">GetSharpness</a>());
<a name="l01457"></a>01457 
<a name="l01458"></a>01458         <span class="comment">// Walk all edges in this cycle and reattach them to duplicate</span>
<a name="l01459"></a>01459         <span class="comment">// vertex</span>
<a name="l01460"></a>01460         <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* start = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[i];
<a name="l01461"></a>01461         e = start;
<a name="l01462"></a>01462         edges.clear();
<a name="l01463"></a>01463         <span class="keywordflow">do</span> {
<a name="l01464"></a>01464             edges.push_back(e);
<a name="l01465"></a>01465             e = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ad6b5fc957ce1f0f67c25a0b66b7e86d2">GetNextEdge</a>(e);
<a name="l01466"></a>01466         } <span class="keywordflow">while</span> (e &amp;&amp; e != start);
<a name="l01467"></a>01467 
<a name="l01468"></a>01468         <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::vector&lt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>*&gt;::iterator ei = edges.begin(); ei != edges.end(); ++ei) {
<a name="l01469"></a>01469             e = *ei;
<a name="l01470"></a>01470             <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a3a1283bef6cbd172053ba59aa84ff5e9">GetOpposite</a>()) {
<a name="l01471"></a>01471                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>* next = e-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#a3a1283bef6cbd172053ba59aa84ff5e9">GetOpposite</a>()-&gt;GetNext();
<a name="l01472"></a>01472                 <span class="keywordflow">if</span> (next-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#ac78adb75925d2e2cc89260ac72cb177e">GetOrgVertex</a>() == <span class="keyword">this</span>) {
<a name="l01473"></a>01473                     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a>--;
<a name="l01474"></a>01474                     next-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#adfe62757dffc1b4ad5f8b08e823b61ce">SetOrgVertex</a>(w);
<a name="l01475"></a>01475                     w-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab6f3530628df0496af5a2ead6adb74c6">AddIncidentEdge</a>(next);
<a name="l01476"></a>01476                 }
<a name="l01477"></a>01477             }
<a name="l01478"></a>01478             <span class="comment">// Check again, because sometimes it&apos;s been relinked by</span>
<a name="l01479"></a>01479             <span class="comment">// previous clause already</span>
<a name="l01480"></a>01480             <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#ac78adb75925d2e2cc89260ac72cb177e">GetOrgVertex</a>() == <span class="keyword">this</span>) {
<a name="l01481"></a>01481                 <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab14f51bef37813d8c67cbc1077fc9043">references</a>--;
<a name="l01482"></a>01482                 e-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html#adfe62757dffc1b4ad5f8b08e823b61ce">SetOrgVertex</a>(w);
<a name="l01483"></a>01483                 w-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#ab6f3530628df0496af5a2ead6adb74c6">AddIncidentEdge</a>(e);
<a name="l01484"></a>01484             }
<a name="l01485"></a>01485         }
<a name="l01486"></a>01486         w-&gt;<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a16ccb6dfc2785b1f0ed81e1633c5b45a">Finish</a>();
<a name="l01487"></a>01487     }
<a name="l01488"></a>01488 
<a name="l01489"></a>01489     e = <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0];
<a name="l01490"></a>01490     <span class="keywordflow">if</span> (nIncidentEdges &gt; 1) {
<a name="l01491"></a>01491         <span class="keyword">delete</span>[] <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>;
<a name="l01492"></a>01492     }
<a name="l01493"></a>01493     nIncidentEdges = 1;
<a name="l01494"></a>01494     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a> = (<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrHalfedge.html">HbrHalfedge&lt;T&gt;</a>**) ((<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(*this));
<a name="l01495"></a>01495     <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html#a2bff8e4a74bc2d28eca67f2d37a18254">incidentEdges</a>[0] = e;
<a name="l01496"></a>01496 }
<a name="l01497"></a>01497 
<a name="l01498"></a>01498 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01499"></a>01499 std::ostream&amp;
<a name="l01500"></a><a class="code" href="namespaceOpenSubdiv_1_1OPENSUBDIV__VERSION.html#ab09bd9c89bcaa77f17f34f0fe5bb2d06">01500</a> operator&lt;&lt;(std::ostream&amp; out, const HbrVertex&lt;T&gt;&amp; vertex) {
<a name="l01501"></a>01501     <span class="keywordflow">return</span> out &lt;&lt; <span class="stringliteral">&quot;vertex &quot;</span> &lt;&lt; vertex.GetID();
<a name="l01502"></a>01502 }
<a name="l01503"></a>01503 
<a name="l01504"></a>01504 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01505"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertexOperator.html">01505</a> <span class="keyword">class </span><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertexOperator.html">HbrVertexOperator</a> {
<a name="l01506"></a>01506 <span class="keyword">public</span>:
<a name="l01507"></a>01507     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertexOperator.html#ad46f3c101598f4da633cdfc95d784a74">operator() </a>(<a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertex.html">HbrVertex&lt;T&gt;</a> &amp;vertex) = 0;
<a name="l01508"></a><a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertexOperator.html#a699a72d8550a3e2637a1be7982a620e4">01508</a>     <span class="keyword">virtual</span> <a class="code" href="classOpenSubdiv_1_1OPENSUBDIV__VERSION_1_1HbrVertexOperator.html#a699a72d8550a3e2637a1be7982a620e4">~HbrVertexOperator</a>() {}
<a name="l01509"></a>01509 };
<a name="l01510"></a>01510 
<a name="l01511"></a>01511 } <span class="comment">// end namespace OPENSUBDIV_VERSION</span>
<a name="l01512"></a>01512 <span class="keyword">using namespace </span><a class="code" href="version_8h.html#a3e1fd5f7ca528466eeb21b73b1b33a8c">OPENSUBDIV_VERSION</a>;
<a name="l01513"></a>01513 
<a name="l01514"></a>01514 } <span class="comment">// end namespace OpenSubdiv</span>
<a name="l01515"></a>01515 
<a name="l01516"></a>01516 <span class="preprocessor">#endif </span><span class="comment">/* HBRVERTEX_H */</span>
<a name="l01517"></a>01517 
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 5 Sep 2012 for OpenSubdiv by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
